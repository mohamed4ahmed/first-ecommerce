/*! For license information please see 114.4c08ab38.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksimksa=self.webpackChunksimksa||[]).push([[114],{8403:(t,e,n)=>{n.d(e,{A:()=>E});var r,i,o=n(6326),a=n(846),s=n(7339),u=n(6678),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.FA("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Vy("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.A4)(t),this.container=new s.h1(e.name),this._addComponent(new s.uA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.gR)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.uA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.He,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");(0,u.Ey)(t,e)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.gR)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.zw)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.Cl)((0,o.Cl)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.zw)(e,t)},createSubscribe:a.tD,ErrorFactory:a.FA,deepExtend:a.zw}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.Bd)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.Ll)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new s.uA("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.18",e),t.registerVersion("fire-js","")}(w);const E=w},7339:(t,e,n)=>{n.d(e,{h1:()=>u,uA:()=>o});var r=n(6326),i=n(846),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.cY;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.Cl)({identifier:a,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService({instanceIdentifier:o});if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(u){if(i)return null;throw u}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=(0,r.Ju)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.zs)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.sH)(this,void 0,void 0,(function(){var t;return(0,r.YH)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fX)((0,r.fX)([],(0,r.zs)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.zs)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=void 0===e?a:e,r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},6678:(t,e,n)=>{function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{$b:()=>o,Ey:()=>d,He:()=>f,Vy:()=>h});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},846:(t,e,n)=>{n.d(e,{A4:()=>o,Bd:()=>h,FA:()=>g,Ku:()=>_,Ll:()=>l,ZQ:()=>u,b8:()=>p,cY:()=>s,gR:()=>w,jZ:()=>c,lT:()=>v,lV:()=>d,n4:()=>m,sr:()=>f,tD:()=>E,zw:()=>a});var r=n(6326),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};function o(t){return a(void 0,t)}function a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=a(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function u(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function l(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function h(){return"object"===typeof self&&self.self===self}function f(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function d(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function p(){return u().indexOf("Electron/")>=0}function v(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return u().indexOf("MSAppHost/")>=0}var y=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return(0,r.C6)(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(b,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").";return new y(i,s,r)},t}();var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function E(t,e){var n=new I(t,e);return n.subscribe.bind(n)}var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function T(){}function _(t){return t&&t._delegate?t._delegate:t}},8951:(t,e,n)=>{n.d(e,{A:()=>l});var r=n(8168),i=n(45),o=n(5043),a=n(3024),s=n(581),u=n(8553),c=o.forwardRef((function(t,e){var n=t.disableUnderline,u=t.classes,c=t.fullWidth,l=void 0!==c&&c,h=t.inputComponent,f=void 0===h?"input":h,d=t.multiline,p=void 0!==d&&d,v=t.type,m=void 0===v?"text":v,y=(0,i.A)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(s.A,(0,r.A)({classes:(0,r.A)({},u,{root:(0,a.A)(u.root,!n&&u.underline),underline:null}),fullWidth:l,inputComponent:f,multiline:p,ref:e,type:m},y))}));c.muiName="Input";const l=(0,u.A)((function(t){var e="light"===t.palette.type,n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:e?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:t.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(t.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(t.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.type?null:"#fff",caretColor:"light"===t.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(c)},6612:(t,e,n)=>{n.d(e,{A:()=>a,t:()=>o});var r=n(5043),i=r.createContext();function o(){return r.useContext(i)}const a=i},3810:(t,e,n)=>{function r(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce((function(t,n){return t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t}),{})}n.d(e,{A:()=>r})},2696:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(5043),i=n(6612);function o(){return r.useContext(i.A)}},581:(t,e,n)=>{n.d(e,{A:()=>E});var r=n(45),i=n(8168),o=n(3985),a=n(5043),s=n(3024),u=n(3810),c=n(6612),l=n(8553),h=n(4822),f=n(768),d=n(7355);function p(t,e){return parseInt(t[e],10)||0}var v="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,m={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const y=a.forwardRef((function(t,e){var n=t.onChange,o=t.rows,s=t.rowsMax,u=t.rowsMin,c=t.maxRows,l=t.minRows,h=void 0===l?1:l,y=t.style,g=t.value,b=(0,r.A)(t,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),w=c||s,E=o||u||h,I=a.useRef(null!=g).current,T=a.useRef(null),_=(0,f.A)(e,T),A=a.useRef(null),S=a.useRef(0),C=a.useState({}),N=C[0],x=C[1],D=a.useCallback((function(){var e=T.current,n=window.getComputedStyle(e),r=A.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],o=p(n,"padding-bottom")+p(n,"padding-top"),a=p(n,"border-bottom-width")+p(n,"border-top-width"),s=r.scrollHeight-o;r.value="x";var u=r.scrollHeight-o,c=s;E&&(c=Math.max(Number(E)*u,c)),w&&(c=Math.min(Number(w)*u,c));var l=(c=Math.max(c,u))+("border-box"===i?o+a:0),h=Math.abs(c-s)<=1;x((function(t){return S.current<20&&(l>0&&Math.abs((t.outerHeightStyle||0)-l)>1||t.overflow!==h)?(S.current+=1,{overflow:h,outerHeightStyle:l}):t}))}),[w,E,t.placeholder]);a.useEffect((function(){var t=(0,d.A)((function(){S.current=0,D()}));return window.addEventListener("resize",t),function(){t.clear(),window.removeEventListener("resize",t)}}),[D]),v((function(){D()})),a.useEffect((function(){S.current=0}),[g]);return a.createElement(a.Fragment,null,a.createElement("textarea",(0,i.A)({value:g,onChange:function(t){S.current=0,I||D(),n&&n(t)},ref:_,rows:E,style:(0,i.A)({height:N.outerHeightStyle,overflow:N.overflow?"hidden":null},y)},b)),a.createElement("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:A,tabIndex:-1,style:(0,i.A)({},m,y)}))}));var g=n(6031),b="undefined"===typeof window?a.useEffect:a.useLayoutEffect,w=a.forwardRef((function(t,e){var n=t["aria-describedby"],l=t.autoComplete,d=t.autoFocus,p=t.classes,v=t.className,m=(t.color,t.defaultValue),w=t.disabled,E=t.endAdornment,I=(t.error,t.fullWidth),T=void 0!==I&&I,_=t.id,A=t.inputComponent,S=void 0===A?"input":A,C=t.inputProps,N=void 0===C?{}:C,x=t.inputRef,D=(t.margin,t.multiline),k=void 0!==D&&D,R=t.name,O=t.onBlur,P=t.onChange,L=t.onClick,M=t.onFocus,F=t.onKeyDown,V=t.onKeyUp,H=t.placeholder,q=t.readOnly,U=t.renderSuffix,B=t.rows,j=t.rowsMax,K=t.rowsMin,z=t.maxRows,Y=t.minRows,W=t.startAdornment,G=t.type,Q=void 0===G?"text":G,X=t.value,$=(0,r.A)(t,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),J=null!=N.value?N.value:X,Z=a.useRef(null!=J).current,tt=a.useRef(),et=a.useCallback((function(t){0}),[]),nt=(0,f.A)(N.ref,et),rt=(0,f.A)(x,nt),it=(0,f.A)(tt,rt),ot=a.useState(!1),at=ot[0],st=ot[1],ut=(0,c.t)();var ct=(0,u.A)({props:t,muiFormControl:ut,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ct.focused=ut?ut.focused:at,a.useEffect((function(){!ut&&w&&at&&(st(!1),O&&O())}),[ut,w,at,O]);var lt=ut&&ut.onFilled,ht=ut&&ut.onEmpty,ft=a.useCallback((function(t){(0,g.lq)(t)?lt&&lt():ht&&ht()}),[lt,ht]);b((function(){Z&&ft({value:J})}),[J,ft,Z]);a.useEffect((function(){ft(tt.current)}),[]);var dt=S,pt=(0,i.A)({},N,{ref:it});"string"!==typeof dt?pt=(0,i.A)({inputRef:it,type:Q},pt,{ref:null}):k?!B||z||Y||j||K?(pt=(0,i.A)({minRows:B||Y,rowsMax:j,maxRows:z},pt),dt=y):dt="textarea":pt=(0,i.A)({type:Q},pt);return a.useEffect((function(){ut&&ut.setAdornedStart(Boolean(W))}),[ut,W]),a.createElement("div",(0,i.A)({className:(0,s.A)(p.root,p["color".concat((0,h.A)(ct.color||"primary"))],v,ct.disabled&&p.disabled,ct.error&&p.error,T&&p.fullWidth,ct.focused&&p.focused,ut&&p.formControl,k&&p.multiline,W&&p.adornedStart,E&&p.adornedEnd,"dense"===ct.margin&&p.marginDense),onClick:function(t){tt.current&&t.currentTarget===t.target&&tt.current.focus(),L&&L(t)},ref:e},$),W,a.createElement(c.A.Provider,{value:null},a.createElement(dt,(0,i.A)({"aria-invalid":ct.error,"aria-describedby":n,autoComplete:l,autoFocus:d,defaultValue:m,disabled:ct.disabled,id:_,onAnimationStart:function(t){ft("mui-auto-fill-cancel"===t.animationName?tt.current:{value:"x"})},name:R,placeholder:H,readOnly:q,required:ct.required,rows:B,value:J,onKeyDown:F,onKeyUp:V},pt,{className:(0,s.A)(p.input,N.className,ct.disabled&&p.disabled,k&&p.inputMultiline,ct.hiddenLabel&&p.inputHiddenLabel,W&&p.inputAdornedStart,E&&p.inputAdornedEnd,"search"===Q&&p.inputTypeSearch,"dense"===ct.margin&&p.inputMarginDense),onBlur:function(t){O&&O(t),N.onBlur&&N.onBlur(t),ut&&ut.onBlur?ut.onBlur(t):st(!1)},onChange:function(t){if(!Z){var e=t.target||tt.current;if(null==e)throw new Error((0,o.A)(1));ft({value:e.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];N.onChange&&N.onChange.apply(N,[t].concat(r)),P&&P.apply(void 0,[t].concat(r))},onFocus:function(t){ct.disabled?t.stopPropagation():(M&&M(t),N.onFocus&&N.onFocus(t),ut&&ut.onFocus?ut.onFocus(t):st(!0))}}))),E,U?U((0,i.A)({},ct,{startAdornment:W})):null)}));const E=(0,l.A)((function(t){var e="light"===t.palette.type,n={color:"currentColor",opacity:e?.42:.5,transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},o={opacity:e?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,i.A)({},t.typography.body1,{color:t.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:t.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(w)},6031:(t,e,n)=>{function r(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function i(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(r(t.value)&&""!==t.value||e&&r(t.defaultValue)&&""!==t.defaultValue)}function o(t){return t.startAdornment}n.d(e,{gr:()=>o,lq:()=>i})},403:(t,e,n)=>{n.d(e,{A:()=>l});var r=n(8168),i=n(45),o=n(5043),a=n(3024),s=n(581),u=n(8553),c=o.forwardRef((function(t,e){var n=t.disableUnderline,u=t.classes,c=t.fullWidth,l=void 0!==c&&c,h=t.inputComponent,f=void 0===h?"input":h,d=t.multiline,p=void 0!==d&&d,v=t.type,m=void 0===v?"text":v,y=(0,i.A)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(s.A,(0,r.A)({classes:(0,r.A)({},u,{root:(0,a.A)(u.root,!n&&u.underline),underline:null}),fullWidth:l,inputComponent:f,multiline:p,ref:e,type:m},y))}));c.muiName="Input";const l=(0,u.A)((function(t){var e="light"===t.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:t.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(t.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(e),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(t.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(e)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(c)},5982:(t,e,n)=>{n.d(e,{A:()=>r});const r=n(5043).createContext({})},2371:(t,e,n)=>{n.d(e,{A:()=>k});var r=n(45),i=n(8168),o=n(5043),a=n(7950),s=n(9484),u=n(4534),c=n(9892),l=n(9189),h=n(768);var f="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;const d=o.forwardRef((function(t,e){var n=t.children,r=t.container,i=t.disablePortal,s=void 0!==i&&i,u=t.onRendered,c=o.useState(null),d=c[0],p=c[1],v=(0,h.A)(o.isValidElement(n)?n.ref:null,e);return f((function(){s||p(function(t){return t="function"===typeof t?t():t,a.findDOMNode(t)}(r)||document.body)}),[r,s]),f((function(){if(d&&!s)return(0,l.A)(e,d),function(){(0,l.A)(e,null)}}),[e,d,s]),f((function(){u&&(d||s)&&u()}),[u,d,s]),s?o.isValidElement(n)?o.cloneElement(n,{ref:v}):n:d?a.createPortal(n,d):d}));var p=n(146),v=n(2158),m=n(5321);var y=n(2901),g=n(5458),b=n(5107),w=n(7249);function E(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function I(t){return parseInt(window.getComputedStyle(t)["padding-right"],10)||0}function T(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[e,n].concat((0,g.A)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,(function(t){1===t.nodeType&&-1===o.indexOf(t)&&-1===a.indexOf(t.tagName)&&E(t,i)}))}function _(t,e){var n=-1;return t.some((function(t,r){return!!e(t)&&(n=r,!0)})),n}function A(t,e){var n,r=[],i=[],o=t.container;if(!e.disableScrollLock){if(function(t){var e=(0,c.A)(t);return e.body===t?(0,w.A)(e).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(o)){var a=(0,b.A)();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(I(o)+a,"px"),n=(0,c.A)(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(t){i.push(t.style.paddingRight),t.style.paddingRight="".concat(I(t)+a,"px")}))}var s=o.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(t,e){i[e]?t.style.paddingRight=i[e]:t.style.removeProperty("padding-right")})),r.forEach((function(t){var e=t.value,n=t.el,r=t.key;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modals=[],this.containers=[]}return(0,y.A)(t,[{key:"add",value:function(t,e){var n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&E(t.modalRef,!1);var r=function(t){var e=[];return[].forEach.call(t.children,(function(t){t.getAttribute&&"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);T(e,t.mountNode,t.modalRef,r,!0);var i=_(this.containers,(function(t){return t.container===e}));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(t,e){var n=_(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];r.restore||(r.restore=A(r,e))}},{key:"remove",value:function(t){var e=this.modals.indexOf(t);if(-1===e)return e;var n=_(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(e,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&E(t.modalRef,!0),T(r.container,t.mountNode,t.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&E(i.modalRef,!1)}return e}},{key:"isTopModal",value:function(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}]),t}();const C=function(t){var e=t.children,n=t.disableAutoFocus,r=void 0!==n&&n,i=t.disableEnforceFocus,s=void 0!==i&&i,u=t.disableRestoreFocus,l=void 0!==u&&u,f=t.getDoc,d=t.isEnabled,p=t.open,v=o.useRef(),m=o.useRef(null),y=o.useRef(null),g=o.useRef(),b=o.useRef(null),w=o.useCallback((function(t){b.current=a.findDOMNode(t)}),[]),E=(0,h.A)(e.ref,w),I=o.useRef();return o.useEffect((function(){I.current=p}),[p]),!I.current&&p&&"undefined"!==typeof window&&(g.current=f().activeElement),o.useEffect((function(){if(p){var t=(0,c.A)(b.current);r||!b.current||b.current.contains(t.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex",-1),b.current.focus());var e=function(){null!==b.current&&(t.hasFocus()&&!s&&d()&&!v.current?b.current&&!b.current.contains(t.activeElement)&&b.current.focus():v.current=!1)},n=function(e){!s&&d()&&9===e.keyCode&&t.activeElement===b.current&&(v.current=!0,e.shiftKey?y.current.focus():m.current.focus())};t.addEventListener("focus",e,!0),t.addEventListener("keydown",n,!0);var i=setInterval((function(){e()}),50);return function(){clearInterval(i),t.removeEventListener("focus",e,!0),t.removeEventListener("keydown",n,!0),l||(g.current&&g.current.focus&&g.current.focus(),g.current=null)}}}),[r,s,l,d,p]),o.createElement(o.Fragment,null,o.createElement("div",{tabIndex:0,ref:m,"data-test":"sentinelStart"}),o.cloneElement(e,{ref:E}),o.createElement("div",{tabIndex:0,ref:y,"data-test":"sentinelEnd"}))};var N={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}};const x=o.forwardRef((function(t,e){var n=t.invisible,a=void 0!==n&&n,s=t.open,u=(0,r.A)(t,["invisible","open"]);return s?o.createElement("div",(0,i.A)({"aria-hidden":!0,ref:e},u,{style:(0,i.A)({},N.root,a?N.invisible:{},u.style)})):null}));var D=new S;const k=o.forwardRef((function(t,e){var n=(0,s.A)(),l=(0,u.A)({name:"MuiModal",props:(0,i.A)({},t),theme:n}),f=l.BackdropComponent,y=void 0===f?x:f,g=l.BackdropProps,b=l.children,w=l.closeAfterTransition,I=void 0!==w&&w,T=l.container,_=l.disableAutoFocus,A=void 0!==_&&_,S=l.disableBackdropClick,N=void 0!==S&&S,k=l.disableEnforceFocus,R=void 0!==k&&k,O=l.disableEscapeKeyDown,P=void 0!==O&&O,L=l.disablePortal,M=void 0!==L&&L,F=l.disableRestoreFocus,V=void 0!==F&&F,H=l.disableScrollLock,q=void 0!==H&&H,U=l.hideBackdrop,B=void 0!==U&&U,j=l.keepMounted,K=void 0!==j&&j,z=l.manager,Y=void 0===z?D:z,W=l.onBackdropClick,G=l.onClose,Q=l.onEscapeKeyDown,X=l.onRendered,$=l.open,J=(0,r.A)(l,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),Z=o.useState(!0),tt=Z[0],et=Z[1],nt=o.useRef({}),rt=o.useRef(null),it=o.useRef(null),ot=(0,h.A)(it,e),at=function(t){return!!t.children&&t.children.props.hasOwnProperty("in")}(l),st=function(){return(0,c.A)(rt.current)},ut=function(){return nt.current.modalRef=it.current,nt.current.mountNode=rt.current,nt.current},ct=function(){Y.mount(ut(),{disableScrollLock:q}),it.current.scrollTop=0},lt=(0,v.A)((function(){var t=function(t){return t="function"===typeof t?t():t,a.findDOMNode(t)}(T)||st().body;Y.add(ut(),t),it.current&&ct()})),ht=o.useCallback((function(){return Y.isTopModal(ut())}),[Y]),ft=(0,v.A)((function(t){rt.current=t,t&&(X&&X(),$&&ht()?ct():E(it.current,!0))})),dt=o.useCallback((function(){Y.remove(ut())}),[Y]);if(o.useEffect((function(){return function(){dt()}}),[dt]),o.useEffect((function(){$?lt():at&&I||dt()}),[$,dt,at,I,lt]),!K&&!$&&(!at||tt))return null;var pt=function(t){return{root:{position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:m.A}),vt={};return void 0===b.props.tabIndex&&(vt.tabIndex=b.props.tabIndex||"-1"),at&&(vt.onEnter=(0,p.A)((function(){et(!1)}),b.props.onEnter),vt.onExited=(0,p.A)((function(){et(!0),I&&dt()}),b.props.onExited)),o.createElement(d,{ref:ft,container:T,disablePortal:M},o.createElement("div",(0,i.A)({ref:ot,onKeyDown:function(t){"Escape"===t.key&&ht()&&(Q&&Q(t),P||(t.stopPropagation(),G&&G(t,"escapeKeyDown")))},role:"presentation"},J,{style:(0,i.A)({},pt.root,!$&&tt?pt.hidden:{},J.style)}),B?null:o.createElement(y,(0,i.A)({open:$,onClick:function(t){t.target===t.currentTarget&&(W&&W(t),!N&&G&&G(t,"backdropClick"))}},g)),o.createElement(C,{disableEnforceFocus:R,disableAutoFocus:A,disableRestoreFocus:V,getDoc:st,isEnabled:ht,open:$},o.cloneElement(b,vt))))}))},8908:(t,e,n)=>{n.d(e,{A:()=>v});var r=n(8168),i=n(45),o=n(5043),a=n(3024),s=n(581),u=n(4467),c=n(8553),l=n(567),h=n(4822),f=o.forwardRef((function(t,e){t.children;var n=t.classes,s=t.className,c=t.label,f=t.labelWidth,d=t.notched,p=t.style,v=(0,i.A)(t,["children","classes","className","label","labelWidth","notched","style"]),m="rtl"===(0,l.A)().direction?"right":"left";if(void 0!==c)return o.createElement("fieldset",(0,r.A)({"aria-hidden":!0,className:(0,a.A)(n.root,s),ref:e,style:p},v),o.createElement("legend",{className:(0,a.A)(n.legendLabelled,d&&n.legendNotched)},c?o.createElement("span",null,c):o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var y=f>0?.75*f+8:.01;return o.createElement("fieldset",(0,r.A)({"aria-hidden":!0,style:(0,r.A)((0,u.A)({},"padding".concat((0,h.A)(m)),8),p),className:(0,a.A)(n.root,s),ref:e},v),o.createElement("legend",{className:n.legend,style:{width:d?y:.01}},o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))}));const d=(0,c.A)((function(t){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(f);var p=o.forwardRef((function(t,e){var n=t.classes,u=t.fullWidth,c=void 0!==u&&u,l=t.inputComponent,h=void 0===l?"input":l,f=t.label,p=t.labelWidth,v=void 0===p?0:p,m=t.multiline,y=void 0!==m&&m,g=t.notched,b=t.type,w=void 0===b?"text":b,E=(0,i.A)(t,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return o.createElement(s.A,(0,r.A)({renderSuffix:function(t){return o.createElement(d,{className:n.notchedOutline,label:f,labelWidth:v,notched:"undefined"!==typeof g?g:Boolean(t.startAdornment||t.filled||t.focused)})},classes:(0,r.A)({},n,{root:(0,a.A)(n.root,n.underline),notchedOutline:null}),fullWidth:c,inputComponent:h,multiline:y,ref:e,type:w},E))}));p.muiName="Input";const v=(0,c.A)((function(t){var e="light"===t.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:t.shape.borderRadius,"&:hover $notchedOutline":{borderColor:t.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:e}},"&$focused $notchedOutline":{borderColor:t.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:t.palette.error.main},"&$disabled $notchedOutline":{borderColor:t.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:t.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:e},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.type?null:"#fff",caretColor:"light"===t.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(p)},5446:(t,e,n)=>{n.d(e,{A:()=>St});var r=n(8168),i=n(45),o=n(5043),a=n(1560),s=n(296),u=n(2284),c=n(3985),l=(n(4090),n(3024)),h=n(9892),f=n(4822),d=n(8553),p=n(7950),v=n(7355),m=n(7249),y=n(146),g=n(2371),b=n(8587),w=n(5540);const E=!1;var I=n(8726),T="unmounted",_="exited",A="entering",S="entered",C="exiting",N=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=_,r.appearStatus=A):i=S:i=e.unmountOnExit||e.mountOnEnter?T:_,r.state={status:i},r.nextCallback=null,r}(0,w.A)(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===T?{status:_}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==A&&n!==S&&(e=A):n!==A&&n!==S||(e=C)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===A){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:p.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===_&&this.setState({status:T})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[p.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!t&&!n||E?this.safeSetState({status:S},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:A},(function(){e.props.onEntering(o,a),e.onTransitionEnd(u,(function(){e.safeSetState({status:S},(function(){e.props.onEntered(o,a)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:p.findDOMNode(this);e&&!E?(this.props.onExit(r),this.safeSetState({status:C},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:_},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:_},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:p.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===T)return null;var e=this.props,n=e.children,r=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,(0,b.A)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(I.A.Provider,{value:null},"function"===typeof n?n(t,r):o.cloneElement(o.Children.only(n),r))},e}(o.Component);function x(){}N.contextType=I.A,N.propTypes={},N.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:x,onEntering:x,onEntered:x,onExit:x,onExiting:x,onExited:x},N.UNMOUNTED=T,N.EXITED=_,N.ENTERING=A,N.ENTERED=S,N.EXITING=C;const D=N;var k=n(567);function R(t,e){var n=t.timeout,r=t.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"===typeof n?n:n[e.mode]||0,delay:i.transitionDelay}}var O=n(768);function P(t){return"scale(".concat(t,", ").concat(Math.pow(t,2),")")}var L={entering:{opacity:1,transform:P(1)},entered:{opacity:1,transform:"none"}},M=o.forwardRef((function(t,e){var n=t.children,a=t.disableStrictModeCompat,u=void 0!==a&&a,c=t.in,l=t.onEnter,h=t.onEntered,f=t.onEntering,d=t.onExit,p=t.onExited,v=t.onExiting,m=t.style,y=t.timeout,g=void 0===y?"auto":y,b=t.TransitionComponent,w=void 0===b?D:b,E=(0,i.A)(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),I=o.useRef(),T=o.useRef(),_=(0,k.A)(),A=_.unstable_strictMode&&!u,S=o.useRef(null),C=(0,O.A)(n.ref,e),N=(0,O.A)(A?S:void 0,C),x=function(t){return function(e,n){if(t){var r=A?[S.current,e]:[e,n],i=(0,s.A)(r,2),o=i[0],a=i[1];void 0===a?t(o):t(o,a)}}},M=x(f),F=x((function(t,e){!function(t){t.scrollTop}(t);var n,r=R({style:m,timeout:g},{mode:"enter"}),i=r.duration,o=r.delay;"auto"===g?(n=_.transitions.getAutoHeightDuration(t.clientHeight),T.current=n):n=i,t.style.transition=[_.transitions.create("opacity",{duration:n,delay:o}),_.transitions.create("transform",{duration:.666*n,delay:o})].join(","),l&&l(t,e)})),V=x(h),H=x(v),q=x((function(t){var e,n=R({style:m,timeout:g},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===g?(e=_.transitions.getAutoHeightDuration(t.clientHeight),T.current=e):e=r,t.style.transition=[_.transitions.create("opacity",{duration:e,delay:i}),_.transitions.create("transform",{duration:.666*e,delay:i||.333*e})].join(","),t.style.opacity="0",t.style.transform=P(.75),d&&d(t)})),U=x(p);return o.useEffect((function(){return function(){clearTimeout(I.current)}}),[]),o.createElement(w,(0,r.A)({appear:!0,in:c,nodeRef:A?S:void 0,onEnter:F,onEntered:V,onEntering:M,onExit:q,onExited:U,onExiting:H,addEndListener:function(t,e){var n=A?t:e;"auto"===g&&(I.current=setTimeout(n,T.current||0))},timeout:"auto"===g?null:g},E),(function(t,e){return o.cloneElement(n,(0,r.A)({style:(0,r.A)({opacity:0,transform:P(.75),visibility:"exited"!==t||c?void 0:"hidden"},L[t],m,n.props.style),ref:N},e))}))}));M.muiSupportAuto=!0;const F=M;var V=n(495);function H(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function q(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function U(t){return[t.horizontal,t.vertical].map((function(t){return"number"===typeof t?"".concat(t,"px"):t})).join(" ")}function B(t){return"function"===typeof t?t():t}var j=o.forwardRef((function(t,e){var n=t.action,a=t.anchorEl,s=t.anchorOrigin,u=void 0===s?{vertical:"top",horizontal:"left"}:s,c=t.anchorPosition,f=t.anchorReference,d=void 0===f?"anchorEl":f,b=t.children,w=t.classes,E=t.className,I=t.container,T=t.elevation,_=void 0===T?8:T,A=t.getContentAnchorEl,S=t.marginThreshold,C=void 0===S?16:S,N=t.onEnter,x=t.onEntered,D=t.onEntering,k=t.onExit,R=t.onExited,O=t.onExiting,P=t.open,L=t.PaperProps,M=void 0===L?{}:L,j=t.transformOrigin,K=void 0===j?{vertical:"top",horizontal:"left"}:j,z=t.TransitionComponent,Y=void 0===z?F:z,W=t.transitionDuration,G=void 0===W?"auto":W,Q=t.TransitionProps,X=void 0===Q?{}:Q,$=(0,i.A)(t,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),J=o.useRef(),Z=o.useCallback((function(t){if("anchorPosition"===d)return c;var e=B(a),n=(e&&1===e.nodeType?e:(0,h.A)(J.current).body).getBoundingClientRect(),r=0===t?u.vertical:"center";return{top:n.top+H(n,r),left:n.left+q(n,u.horizontal)}}),[a,u.horizontal,u.vertical,c,d]),tt=o.useCallback((function(t){var e=0;if(A&&"anchorEl"===d){var n=A(t);if(n&&t.contains(n)){var r=function(t,e){for(var n=e,r=0;n&&n!==t;)r+=(n=n.parentElement).scrollTop;return r}(t,n);e=n.offsetTop+n.clientHeight/2-r||0}0}return e}),[u.vertical,d,A]),et=o.useCallback((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:H(t,K.vertical)+e,horizontal:q(t,K.horizontal)}}),[K.horizontal,K.vertical]),nt=o.useCallback((function(t){var e=tt(t),n={width:t.offsetWidth,height:t.offsetHeight},r=et(n,e);if("none"===d)return{top:null,left:null,transformOrigin:U(r)};var i=Z(e),o=i.top-r.vertical,s=i.left-r.horizontal,u=o+n.height,c=s+n.width,l=(0,m.A)(B(a)),h=l.innerHeight-C,f=l.innerWidth-C;if(o<C){var p=o-C;o-=p,r.vertical+=p}else if(u>h){var v=u-h;o-=v,r.vertical+=v}if(s<C){var y=s-C;s-=y,r.horizontal+=y}else if(c>f){var g=c-f;s-=g,r.horizontal+=g}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:U(r)}}),[a,d,Z,tt,et,C]),rt=o.useCallback((function(){var t=J.current;if(t){var e=nt(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin}}),[nt]),it=o.useCallback((function(t){J.current=p.findDOMNode(t)}),[]);o.useEffect((function(){P&&rt()})),o.useImperativeHandle(n,(function(){return P?{updatePosition:function(){rt()}}:null}),[P,rt]),o.useEffect((function(){if(P){var t=(0,v.A)((function(){rt()}));return window.addEventListener("resize",t),function(){t.clear(),window.removeEventListener("resize",t)}}}),[P,rt]);var ot=G;"auto"!==G||Y.muiSupportAuto||(ot=void 0);var at=I||(a?(0,h.A)(B(a)).body:void 0);return o.createElement(g.A,(0,r.A)({container:at,open:P,ref:e,BackdropProps:{invisible:!0},className:(0,l.A)(w.root,E)},$),o.createElement(Y,(0,r.A)({appear:!0,in:P,onEnter:N,onEntered:x,onExit:k,onExited:R,onExiting:O,timeout:ot},X,{onEntering:(0,y.A)((function(t,e){D&&D(t,e),rt()}),X.onEntering)}),o.createElement(V.A,(0,r.A)({elevation:_,ref:it},M,{className:(0,l.A)(w.paper,M.className)}),b)))}));const K=(0,d.A)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(j);var z=n(5982),Y=o.forwardRef((function(t,e){var n=t.children,a=t.classes,s=t.className,u=t.component,c=void 0===u?"ul":u,h=t.dense,f=void 0!==h&&h,d=t.disablePadding,p=void 0!==d&&d,v=t.subheader,m=(0,i.A)(t,["children","classes","className","component","dense","disablePadding","subheader"]),y=o.useMemo((function(){return{dense:f}}),[f]);return o.createElement(z.A.Provider,{value:y},o.createElement(c,(0,r.A)({className:(0,l.A)(a.root,s,f&&a.dense,!p&&a.padding,v&&a.subheader),ref:e},m),v,n))}));const W=(0,d.A)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(Y);var G=n(5107);function Q(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function X(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function $(t,e){if(void 0===e)return!0;var n=t.innerText;return void 0===n&&(n=t.textContent),0!==(n=n.trim().toLowerCase()).length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function J(t,e,n,r,i,o){for(var a=!1,s=i(t,e,!!e&&n);s;){if(s===t.firstChild){if(a)return;a=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&$(s,o)&&!u)return void s.focus();s=i(t,s,n)}}var Z="undefined"===typeof window?o.useEffect:o.useLayoutEffect;const tt=o.forwardRef((function(t,e){var n=t.actions,a=t.autoFocus,s=void 0!==a&&a,u=t.autoFocusItem,c=void 0!==u&&u,l=t.children,f=t.className,d=t.disabledItemsFocusable,v=void 0!==d&&d,m=t.disableListWrap,y=void 0!==m&&m,g=t.onKeyDown,b=t.variant,w=void 0===b?"selectedMenu":b,E=(0,i.A)(t,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),I=o.useRef(null),T=o.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Z((function(){s&&I.current.focus()}),[s]),o.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(t,e){var n=!I.current.style.width;if(t.clientHeight<I.current.clientHeight&&n){var r="".concat((0,G.A)(!0),"px");I.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=r,I.current.style.width="calc(100% + ".concat(r,")")}return I.current}}}),[]);var _=o.useCallback((function(t){I.current=p.findDOMNode(t)}),[]),A=(0,O.A)(_,e),S=-1;o.Children.forEach(l,(function(t,e){o.isValidElement(t)&&(t.props.disabled||("selectedMenu"===w&&t.props.selected||-1===S)&&(S=e))}));var C=o.Children.map(l,(function(t,e){if(e===S){var n={};return c&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===w&&(n.tabIndex=0),o.cloneElement(t,n)}return t}));return o.createElement(W,(0,r.A)({role:"menu",ref:A,className:f,onKeyDown:function(t){var e=I.current,n=t.key,r=(0,h.A)(e).activeElement;if("ArrowDown"===n)t.preventDefault(),J(e,r,y,v,Q);else if("ArrowUp"===n)t.preventDefault(),J(e,r,y,v,X);else if("Home"===n)t.preventDefault(),J(e,null,y,v,Q);else if("End"===n)t.preventDefault(),J(e,null,y,v,X);else if(1===n.length){var i=T.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&$(r,i);i.previousKeyMatched&&(s||J(e,r,!1,v,Q,i))?t.preventDefault():i.previousKeyMatched=!1}g&&g(t)},tabIndex:s?0:-1},E),C)}));var et=n(9189),nt={vertical:"top",horizontal:"right"},rt={vertical:"top",horizontal:"left"},it=o.forwardRef((function(t,e){var n=t.autoFocus,a=void 0===n||n,s=t.children,u=t.classes,c=t.disableAutoFocusItem,h=void 0!==c&&c,f=t.MenuListProps,d=void 0===f?{}:f,v=t.onClose,m=t.onEntering,y=t.open,g=t.PaperProps,b=void 0===g?{}:g,w=t.PopoverClasses,E=t.transitionDuration,I=void 0===E?"auto":E,T=t.TransitionProps,_=(T=void 0===T?{}:T).onEntering,A=(0,i.A)(T,["onEntering"]),S=t.variant,C=void 0===S?"selectedMenu":S,N=(0,i.A)(t,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),x=(0,k.A)(),D=a&&!h&&y,R=o.useRef(null),O=o.useRef(null),P=-1;o.Children.map(s,(function(t,e){o.isValidElement(t)&&(t.props.disabled||("menu"!==C&&t.props.selected||-1===P)&&(P=e))}));var L=o.Children.map(s,(function(t,e){return e===P?o.cloneElement(t,{ref:function(e){O.current=p.findDOMNode(e),(0,et.A)(t.ref,e)}}):t}));return o.createElement(K,(0,r.A)({getContentAnchorEl:function(){return O.current},classes:w,onClose:v,TransitionProps:(0,r.A)({onEntering:function(t,e){R.current&&R.current.adjustStyleForScrollbar(t,x),m&&m(t,e),_&&_(t,e)}},A),anchorOrigin:"rtl"===x.direction?nt:rt,transformOrigin:"rtl"===x.direction?nt:rt,PaperProps:(0,r.A)({},b,{classes:(0,r.A)({},b.classes,{root:u.paper})}),open:y,ref:e,transitionDuration:I},N),o.createElement(tt,(0,r.A)({onKeyDown:function(t){"Tab"===t.key&&(t.preventDefault(),v&&v(t,"tabKeyDown"))},actions:R,autoFocus:a&&(-1===P||h),autoFocusItem:D,variant:C},d,{className:(0,l.A)(u.list,d.className)}),L))}));const ot=(0,d.A)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(it);var at=n(6031);function st(t,e){return"object"===(0,u.A)(e)&&null!==e?t===e:String(t)===String(e)}var ut=o.forwardRef((function(t,e){var n=t["aria-label"],a=t.autoFocus,u=t.autoWidth,d=t.children,p=t.classes,v=t.className,m=t.defaultValue,y=t.disabled,g=t.displayEmpty,b=t.IconComponent,w=t.inputRef,E=t.labelId,I=t.MenuProps,T=void 0===I?{}:I,_=t.multiple,A=t.name,S=t.onBlur,C=t.onChange,N=t.onClose,x=t.onFocus,D=t.onOpen,k=t.open,R=t.readOnly,P=t.renderValue,L=t.SelectDisplayProps,M=void 0===L?{}:L,F=t.tabIndex,V=(t.type,t.value),H=t.variant,q=void 0===H?"standard":H,U=(0,i.A)(t,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),B=function(t){var e=t.controlled,n=t.default,r=(t.name,t.state,o.useRef(void 0!==e).current),i=o.useState(n),a=i[0],s=i[1];return[r?e:a,o.useCallback((function(t){r||s(t)}),[])]}({controlled:V,default:m,name:"Select"}),j=(0,s.A)(B,2),K=j[0],z=j[1],Y=o.useRef(null),W=o.useState(null),G=W[0],Q=W[1],X=o.useRef(null!=k).current,$=o.useState(),J=$[0],Z=$[1],tt=o.useState(!1),et=tt[0],nt=tt[1],rt=(0,O.A)(e,w);o.useImperativeHandle(rt,(function(){return{focus:function(){G.focus()},node:Y.current,value:K}}),[G,K]),o.useEffect((function(){a&&G&&G.focus()}),[a,G]),o.useEffect((function(){if(G){var t=(0,h.A)(G).getElementById(E);if(t){var e=function(){getSelection().isCollapsed&&G.focus()};return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}}}),[E,G]);var it,ut,ct=function(t,e){t?D&&D(e):N&&N(e),X||(Z(u?null:G.clientWidth),nt(t))},lt=o.Children.toArray(d),ht=function(t){return function(e){var n;if(_||ct(!1,e),_){n=Array.isArray(K)?K.slice():[];var r=K.indexOf(t.props.value);-1===r?n.push(t.props.value):n.splice(r,1)}else n=t.props.value;t.props.onClick&&t.props.onClick(e),K!==n&&(z(n),C&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:n,name:A}}),C(e,t)))}},ft=null!==G&&(X?k:et);delete U["aria-invalid"];var dt=[],pt=!1;((0,at.lq)({value:K})||g)&&(P?it=P(K):pt=!0);var vt=lt.map((function(t){if(!o.isValidElement(t))return null;var e;if(_){if(!Array.isArray(K))throw new Error((0,c.A)(2));(e=K.some((function(e){return st(e,t.props.value)})))&&pt&&dt.push(t.props.children)}else(e=st(K,t.props.value))&&pt&&(ut=t.props.children);return e&&!0,o.cloneElement(t,{"aria-selected":e?"true":void 0,onClick:ht(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:e,value:void 0,"data-value":t.props.value})}));pt&&(it=_?dt.join(", "):ut);var mt,yt=J;!u&&X&&G&&(yt=G.clientWidth),mt="undefined"!==typeof F?F:y?null:0;var gt=M.id||(A?"mui-component-select-".concat(A):void 0);return o.createElement(o.Fragment,null,o.createElement("div",(0,r.A)({className:(0,l.A)(p.root,p.select,p.selectMenu,p[q],v,y&&p.disabled),ref:Q,tabIndex:mt,role:"button","aria-disabled":y?"true":void 0,"aria-expanded":ft?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[E,gt].filter(Boolean).join(" ")||void 0,onKeyDown:function(t){if(!R){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),ct(!0,t))}},onMouseDown:y||R?null:function(t){0===t.button&&(t.preventDefault(),G.focus(),ct(!0,t))},onBlur:function(t){!ft&&S&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:K,name:A}}),S(t))},onFocus:x},M,{id:gt}),function(t){return null==t||"string"===typeof t&&!t.trim()}(it)?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):it),o.createElement("input",(0,r.A)({value:Array.isArray(K)?K.join(","):K,name:A,ref:Y,"aria-hidden":!0,onChange:function(t){var e=lt.map((function(t){return t.props.value})).indexOf(t.target.value);if(-1!==e){var n=lt[e];z(n.props.value),C&&C(t,n)}},tabIndex:-1,className:p.nativeInput,autoFocus:a},U)),o.createElement(b,{className:(0,l.A)(p.icon,p["icon".concat((0,f.A)(q))],ft&&p.iconOpen,y&&p.disabled)}),o.createElement(ot,(0,r.A)({id:"menu-".concat(A||""),anchorEl:G,open:ft,onClose:function(t){ct(!1,t)}},T,{MenuListProps:(0,r.A)({"aria-labelledby":E,role:"listbox",disableListWrap:!0},T.MenuListProps),PaperProps:(0,r.A)({},T.PaperProps,{style:(0,r.A)({minWidth:yt},null!=T.PaperProps?T.PaperProps.style:null)})}),vt))}));const ct=ut;var lt=n(3810),ht=n(2696),ft=o.forwardRef((function(t,e){var n=t.children,a=t.classes,s=t.className,u=t.color,c=void 0===u?"inherit":u,h=t.component,d=void 0===h?"svg":h,p=t.fontSize,v=void 0===p?"medium":p,m=t.htmlColor,y=t.titleAccess,g=t.viewBox,b=void 0===g?"0 0 24 24":g,w=(0,i.A)(t,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return o.createElement(d,(0,r.A)({className:(0,l.A)(a.root,s,"inherit"!==c&&a["color".concat((0,f.A)(c))],"default"!==v&&"medium"!==v&&a["fontSize".concat((0,f.A)(v))]),focusable:"false",viewBox:b,color:m,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:e},w),n,y?o.createElement("title",null,y):null)}));ft.muiName="SvgIcon";const dt=(0,d.A)((function(t){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:t.typography.pxToRem(24),transition:t.transitions.create("fill",{duration:t.transitions.duration.shorter})},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorAction:{color:t.palette.action.active},colorError:{color:t.palette.error.main},colorDisabled:{color:t.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:t.typography.pxToRem(20)},fontSizeLarge:{fontSize:t.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(ft);const pt=function(t){var e=function(e,n){return o.createElement(dt,(0,r.A)({ref:n},e),t)};return e.muiName=dt.muiName,o.memo(o.forwardRef(e))}(o.createElement("path",{d:"M7 10l5 5 5-5z"}));var vt=n(403);const mt=o.forwardRef((function(t,e){var n=t.classes,a=t.className,s=t.disabled,u=t.IconComponent,c=t.inputRef,h=t.variant,d=void 0===h?"standard":h,p=(0,i.A)(t,["classes","className","disabled","IconComponent","inputRef","variant"]);return o.createElement(o.Fragment,null,o.createElement("select",(0,r.A)({className:(0,l.A)(n.root,n.select,n[d],a,s&&n.disabled),disabled:s,ref:c||e},p)),t.multiple?null:o.createElement(u,{className:(0,l.A)(n.icon,n["icon".concat((0,f.A)(d))],s&&n.disabled)}))}));var yt=function(t){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===t.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:t.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:t.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:t.palette.action.active,"&$disabled":{color:t.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},gt=o.createElement(vt.A,null),bt=o.forwardRef((function(t,e){var n=t.children,a=t.classes,s=t.IconComponent,u=void 0===s?pt:s,c=t.input,l=void 0===c?gt:c,h=t.inputProps,f=(t.variant,(0,i.A)(t,["children","classes","IconComponent","input","inputProps","variant"])),d=(0,ht.A)(),p=(0,lt.A)({props:t,muiFormControl:d,states:["variant"]});return o.cloneElement(l,(0,r.A)({inputComponent:mt,inputProps:(0,r.A)({children:n,classes:a,IconComponent:u,variant:p.variant,type:void 0},h,l?l.props.inputProps:{}),ref:e},f))}));bt.muiName="Select";(0,d.A)(yt,{name:"MuiNativeSelect"})(bt);var wt=n(8951),Et=n(8908),It=yt,Tt=o.createElement(vt.A,null),_t=o.createElement(wt.A,null),At=o.forwardRef((function t(e,n){var s=e.autoWidth,u=void 0!==s&&s,c=e.children,l=e.classes,h=e.displayEmpty,f=void 0!==h&&h,d=e.IconComponent,p=void 0===d?pt:d,v=e.id,m=e.input,y=e.inputProps,g=e.label,b=e.labelId,w=e.labelWidth,E=void 0===w?0:w,I=e.MenuProps,T=e.multiple,_=void 0!==T&&T,A=e.native,S=void 0!==A&&A,C=e.onClose,N=e.onOpen,x=e.open,D=e.renderValue,k=e.SelectDisplayProps,R=e.variant,O=void 0===R?"standard":R,P=(0,i.A)(e,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),L=S?mt:ct,M=(0,ht.A)(),F=(0,lt.A)({props:e,muiFormControl:M,states:["variant"]}).variant||O,V=m||{standard:Tt,outlined:o.createElement(Et.A,{label:g,labelWidth:E}),filled:_t}[F];return o.cloneElement(V,(0,r.A)({inputComponent:L,inputProps:(0,r.A)({children:c,IconComponent:p,variant:F,type:void 0,multiple:_},S?{id:v}:{autoWidth:u,displayEmpty:f,labelId:b,MenuProps:I,onClose:C,onOpen:N,open:x,renderValue:D,SelectDisplayProps:(0,r.A)({id:v},k)},y,{classes:y?(0,a.A)({baseClasses:l,newClasses:y.classes,Component:t}):l},m?m.props.inputProps:{}),ref:n},P))}));At.muiName="Select";const St=(0,d.A)(It,{name:"MuiSelect"})(At)},6501:(t,e,n)=>{n.d(e,{A:()=>N});var r=n(8168),i=n(45),o=n(5043),a=n(3024),s=n(403),u=n(8951),c=n(8908),l=n(3810),h=n(2696),f=n(8553),d=n(4822),p=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=(t.color,t.component),f=void 0===c?"label":c,p=(t.disabled,t.error,t.filled,t.focused,t.required,(0,i.A)(t,["children","classes","className","color","component","disabled","error","filled","focused","required"])),v=(0,h.A)(),m=(0,l.A)({props:t,muiFormControl:v,states:["color","required","focused","disabled","error","filled"]});return o.createElement(f,(0,r.A)({className:(0,a.A)(s.root,s["color".concat((0,d.A)(m.color||"primary"))],u,m.disabled&&s.disabled,m.error&&s.error,m.filled&&s.filled,m.focused&&s.focused,m.required&&s.required),ref:e},p),n,m.required&&o.createElement("span",{"aria-hidden":!0,className:(0,a.A)(s.asterisk,m.error&&s.error)},"\u2009","*"))}));const v=(0,f.A)((function(t){return{root:(0,r.A)({color:t.palette.text.secondary},t.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:t.palette.primary.main},"&$disabled":{color:t.palette.text.disabled},"&$error":{color:t.palette.error.main}}),colorSecondary:{"&$focused":{color:t.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:t.palette.error.main}}}}),{name:"MuiFormLabel"})(p);var m=o.forwardRef((function(t,e){var n=t.classes,s=t.className,u=t.disableAnimation,c=void 0!==u&&u,f=(t.margin,t.shrink),d=(t.variant,(0,i.A)(t,["classes","className","disableAnimation","margin","shrink","variant"])),p=(0,h.A)(),m=f;"undefined"===typeof m&&p&&(m=p.filled||p.focused||p.adornedStart);var y=(0,l.A)({props:t,muiFormControl:p,states:["margin","variant"]});return o.createElement(v,(0,r.A)({"data-shrink":m,className:(0,a.A)(n.root,s,p&&n.formControl,!c&&n.animated,m&&n.shrink,"dense"===y.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[y.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:e},d))}));const y=(0,f.A)((function(t){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:t.transitions.create(["color","transform"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(m);var g=n(6031),b=n(4867),w=n(6612),E=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=t.color,l=void 0===c?"primary":c,h=t.component,f=void 0===h?"div":h,p=t.disabled,v=void 0!==p&&p,m=t.error,y=void 0!==m&&m,E=t.fullWidth,I=void 0!==E&&E,T=t.focused,_=t.hiddenLabel,A=void 0!==_&&_,S=t.margin,C=void 0===S?"none":S,N=t.required,x=void 0!==N&&N,D=t.size,k=t.variant,R=void 0===k?"standard":k,O=(0,i.A)(t,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),P=o.useState((function(){var t=!1;return n&&o.Children.forEach(n,(function(e){if((0,b.A)(e,["Input","Select"])){var n=(0,b.A)(e,["Select"])?e.props.input:e;n&&(0,g.gr)(n.props)&&(t=!0)}})),t})),L=P[0],M=P[1],F=o.useState((function(){var t=!1;return n&&o.Children.forEach(n,(function(e){(0,b.A)(e,["Input","Select"])&&(0,g.lq)(e.props,!0)&&(t=!0)})),t})),V=F[0],H=F[1],q=o.useState(!1),U=q[0],B=q[1],j=void 0!==T?T:U;v&&j&&B(!1);var K=o.useCallback((function(){H(!0)}),[]),z={adornedStart:L,setAdornedStart:M,color:l,disabled:v,error:y,filled:V,focused:j,fullWidth:I,hiddenLabel:A,margin:("small"===D?"dense":void 0)||C,onBlur:function(){B(!1)},onEmpty:o.useCallback((function(){H(!1)}),[]),onFilled:K,onFocus:function(){B(!0)},registerEffect:undefined,required:x,variant:R};return o.createElement(w.A.Provider,{value:z},o.createElement(f,(0,r.A)({className:(0,a.A)(s.root,u,"none"!==C&&s["margin".concat((0,d.A)(C))],I&&s.fullWidth),ref:e},O),n))}));const I=(0,f.A)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(E);var T=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=t.component,f=void 0===c?"p":c,d=(t.disabled,t.error,t.filled,t.focused,t.margin,t.required,t.variant,(0,i.A)(t,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),p=(0,h.A)(),v=(0,l.A)({props:t,muiFormControl:p,states:["variant","margin","disabled","error","filled","focused","required"]});return o.createElement(f,(0,r.A)({className:(0,a.A)(s.root,("filled"===v.variant||"outlined"===v.variant)&&s.contained,u,v.disabled&&s.disabled,v.error&&s.error,v.filled&&s.filled,v.focused&&s.focused,v.required&&s.required,"dense"===v.margin&&s.marginDense),ref:e},d)," "===n?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)}));const _=(0,f.A)((function(t){return{root:(0,r.A)({color:t.palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:t.palette.text.disabled},"&$error":{color:t.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(T);var A=n(5446),S={standard:s.A,filled:u.A,outlined:c.A},C=o.forwardRef((function(t,e){var n=t.autoComplete,s=t.autoFocus,u=void 0!==s&&s,c=t.children,l=t.classes,h=t.className,f=t.color,d=void 0===f?"primary":f,p=t.defaultValue,v=t.disabled,m=void 0!==v&&v,g=t.error,b=void 0!==g&&g,w=t.FormHelperTextProps,E=t.fullWidth,T=void 0!==E&&E,C=t.helperText,N=t.hiddenLabel,x=t.id,D=t.InputLabelProps,k=t.inputProps,R=t.InputProps,O=t.inputRef,P=t.label,L=t.multiline,M=void 0!==L&&L,F=t.name,V=t.onBlur,H=t.onChange,q=t.onFocus,U=t.placeholder,B=t.required,j=void 0!==B&&B,K=t.rows,z=t.rowsMax,Y=t.maxRows,W=t.minRows,G=t.select,Q=void 0!==G&&G,X=t.SelectProps,$=t.type,J=t.value,Z=t.variant,tt=void 0===Z?"standard":Z,et=(0,i.A)(t,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var nt={};if("outlined"===tt&&(D&&"undefined"!==typeof D.shrink&&(nt.notched=D.shrink),P)){var rt,it=null!==(rt=null===D||void 0===D?void 0:D.required)&&void 0!==rt?rt:j;nt.label=o.createElement(o.Fragment,null,P,it&&"\xa0*")}Q&&(X&&X.native||(nt.id=void 0),nt["aria-describedby"]=void 0);var ot=C&&x?"".concat(x,"-helper-text"):void 0,at=P&&x?"".concat(x,"-label"):void 0,st=S[tt],ut=o.createElement(st,(0,r.A)({"aria-describedby":ot,autoComplete:n,autoFocus:u,defaultValue:p,fullWidth:T,multiline:M,name:F,rows:K,rowsMax:z,maxRows:Y,minRows:W,type:$,value:J,id:x,inputRef:O,onBlur:V,onChange:H,onFocus:q,placeholder:U,inputProps:k},nt,R));return o.createElement(I,(0,r.A)({className:(0,a.A)(l.root,h),disabled:m,error:b,fullWidth:T,hiddenLabel:N,ref:e,required:j,color:d,variant:tt},et),P&&o.createElement(y,(0,r.A)({htmlFor:x,id:at},D),P),Q?o.createElement(A.A,(0,r.A)({"aria-describedby":ot,id:x,labelId:at,value:J,input:ut},X),c):ut,C&&o.createElement(_,(0,r.A)({id:ot},w),C))}));const N=(0,f.A)({root:{}},{name:"MuiTextField"})(C)},567:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(9484),i=(n(5043),n(5537));function o(){return(0,r.A)()||i.A}},146:(t,e,n)=>{function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))}n.d(e,{A:()=>r})},7355:(t,e,n)=>{function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=this;clearTimeout(e),e=setTimeout((function(){t.apply(a,i)}),n)}return r.clear=function(){clearTimeout(e)},r}n.d(e,{A:()=>r})},5107:(t,e,n)=>{function r(){var t=document.createElement("div");t.style.width="99px",t.style.height="99px",t.style.position="absolute",t.style.top="-9999px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}n.d(e,{A:()=>r})},4867:(t,e,n)=>{n.d(e,{A:()=>i});var r=n(5043);function i(t,e){return r.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)}},9892:(t,e,n)=>{function r(t){return t&&t.ownerDocument||document}n.d(e,{A:()=>r})},7249:(t,e,n)=>{n.d(e,{A:()=>i});var r=n(9892);function i(t){return(0,r.A)(t).defaultView||window}},5638:(t,e)=>{var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,u=60110,c=60112,l=60113,h=60120,f=60115,d=60116,p=60121,v=60122,m=60117,y=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),o=b("react.strict_mode"),a=b("react.profiler"),s=b("react.provider"),u=b("react.context"),c=b("react.forward_ref"),l=b("react.suspense"),h=b("react.suspense_list"),f=b("react.memo"),d=b("react.lazy"),p=b("react.block"),v=b("react.server.block"),m=b("react.fundamental"),y=b("react.debug_trace_mode"),g=b("react.legacy_hidden")}function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case i:case a:case o:case l:case h:return t;default:switch(t=t&&t.$$typeof){case u:case c:case d:case f:case s:return t;default:return e}}case r:return e}}}},4090:(t,e,n)=>{n(5638)},2747:(t,e,n)=>{n.d(e,{A:()=>r.A});var r=n(8403);r.A.registerVersion("firebase","8.3.2","app")},4444:(t,e,n)=>{var r=n(8403),i=n(846),o=n(6678),a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)};function s(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},l=l||{},h=c||self;function f(){}function d(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function E(){return Date.now()}function I(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)})(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},A=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function S(t){return Array.prototype.concat.apply([],arguments)}function C(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var x,D=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function k(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var O=h.navigator;if(O){var P=O.userAgent;if(P){x=P;break t}}x=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function H(t){return H[" "](t),t}H[" "]=f;var q,U=k(x,"Opera"),B=k(x,"Trident")||k(x,"MSIE"),j=k(x,"Edge"),K=j||B,z=k(x,"Gecko")&&!(k(x.toLowerCase(),"webkit")&&!k(x,"Edge"))&&!(k(x,"Trident")||k(x,"MSIE"))&&!k(x,"Edge"),Y=k(x.toLowerCase(),"webkit")&&!k(x,"Edge");function W(){var t=h.document;return t?t.documentMode:void 0}t:{var G="",Q=function(){var t=x;return z?/rv:([^\);]+)(\)|;)/.exec(t):j?/Edge\/([\d\.]+)/.exec(t):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Y?/WebKit\/(\S+)/.exec(t):U?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Q&&(G=Q?Q[1]:""),B){var X=W();if(null!=X&&X>parseFloat(G)){q=String(X);break t}}q=G}var $,J={};function Z(t){return function(t,e){var n=J;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=D(String(q)).split("."),r=D(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(h.document&&B){var tt=W();$=tt||(parseInt(q,10)||void 0)}else $=void 0;var et=$,nt=!B||9<=Number(et),rt=B&&!Z("9"),it=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",f,e),h.removeEventListener("test",f,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(z){t:{try{H(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.defaultPrevented=!0},I(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ct,this.Y=this.Z=!1}function ht(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function dt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=pt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),mt={};function yt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.va(e,n,p(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=At(t);if(s||(t[vt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=_t,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(It(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.wa(e,n,p(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function wt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Ct(n),t&&t[ut]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=pt(o=t.a[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=At(t))&&(e=t.a[e.toString()],t=-1,e&&(t=pt(e,n,r,i)),(n=-1<t?e[t]:null)&&Et(n))}function Et(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ut])dt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(It(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=At(e))?(dt(n,t),0==n.b&&(n.src=null,e[vt]=null)):ht(t)}}}function It(t){return t in mt?mt[t]:mt[t]="on"+t}function Tt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Et(t),n.call(r,e)}function _t(t,e){if(t.Y)return!0;if(!nt){if(!e)t:{e=["window","event"];for(var n=h,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Tt(t,e=new at(e,this))}return Tt(t,new at(e,this))}function At(t){return(t=t[vt])instanceof ft?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"===typeof t?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function Nt(){T.call(this),this.c=new ft(this),this.J=this,this.C=null}function xt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;V(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Dt(a,r,!0,e)&&i}if(i=Dt(a=e.a=t,r,!0,e)&&i,i=Dt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Dt(a=e.a=n[o],r,!1,e)&&i}function Dt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&dt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}I(Nt,T),Nt.prototype[ut]=!0,(u=Nt.prototype).addEventListener=function(t,e,n,r){yt(this,t,e,n,r)},u.removeEventListener=function(t,e,n,r){wt(this,t,e,n,r)},u.G=function(){if(Nt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.C=null},u.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},u.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kt=h.JSON.stringify;function Rt(){this.b=this.a=null}var Ot,Pt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Mt}),(function(t){t.reset()}));function Lt(){var t=qt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Mt(){this.next=this.b=this.a=null}function Ft(t){h.setTimeout((function(){throw t}),0)}function Vt(t,e){Ot||function(){var t=h.Promise.resolve(void 0);Ot=function(){t.then(Ut)}}(),Ht||(Ot(),Ht=!0),qt.add(t,e)}Rt.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Mt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Mt.prototype.reset=function(){this.next=this.b=this.a=null};var Ht=!1,qt=new Rt;function Ut(){for(var t;t=Lt();){try{t.a.call(t.b)}catch(n){Ft(n)}var e=Pt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ht=!1}function Bt(t,e){Nt.call(this),this.b=t||1,this.a=e||h,this.f=b(this.Za,this),this.g=E()}function jt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Kt(t,e,n){if("function"===typeof t)n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function zt(t){t.a=Kt((function(){t.a=null,t.c&&(t.c=!1,zt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}I(Bt,Nt),(u=Bt.prototype).aa=!1,u.M=null,u.Za=function(){if(this.aa){var t=E()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),xt(this,"tick"),this.aa&&(jt(this),this.start()))}},u.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=E())},u.G=function(){Bt.X.G.call(this),jt(this),delete this.a};var Yt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:zt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(h.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(T);function Wt(t){T.call(this),this.b=t,this.a={}}I(Wt,T);var Gt=[];function Qt(t,e,n,r){Array.isArray(n)||(n&&(Gt[0]=n.toString()),n=Gt);for(var i=0;i<n.length;i++){var o=yt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Xt(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Et(t)}),t),t.a={}}function $t(){this.a=!0}function Jt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return kt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.X.G.call(this),Xt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$t.prototype.info=function(){};var Zt={},te=null;function ee(){return te=te||new Nt}function ne(t){ot.call(this,Zt.Fa,t)}function re(t){var e=ee();xt(e,new ne(e,t))}function ie(t,e){ot.call(this,Zt.STAT_EVENT,t),this.stat=e}function oe(t){var e=ee();xt(e,new ie(e,t))}function ae(t){ot.call(this,Zt.Ga,t)}function se(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}Zt.Fa="serverreachability",I(ne,ot),Zt.STAT_EVENT="statevent",I(ie,ot),Zt.Ga="timingevent",I(ae,ot);var ue={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ce={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function le(){}function he(t){var e;return(e=t.a)||(e=t.a={}),e}function fe(){}le.prototype.a=null;var de,pe={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ve(){ot.call(this,"d")}function me(){ot.call(this,"c")}function ye(){}function ge(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Wt(this),this.P=be,t=K?125:void 0,this.R=new Bt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}I(ve,ot),I(me,ot),I(ye,le),de=new ye;var be=45e3,we={},Ee={};function Ie(t,e,n){t.H=1,t.i=Ke(Ve(e)),t.j=n,t.I=!0,Te(t,null)}function Te(t,e){t.u=E(),Se(t),t.l=Ve(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=Jn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Yt(b(t.Ca,t,t.a),t.O)),Qt(t.J,t.a,"readystatechange",t.Xa),e=t.B?M(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function _e(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ae(t,n);if(i==Ee){4==e&&(t.h=4,oe(14),r=!1),Jt(t.c,t.f,null,"[Incomplete Response]");break}if(i==we){t.h=4,oe(15),Jt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Jt(t.c,t.f,i,null),ke(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kn(e),e.F=!0,oe(11))):(Jt(t.c,t.f,n,"[Invalid Chunked Response]"),De(t),xe(t))}function Ae(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ee:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?Ee:(e=e.substr(r,n),t.D=r+n,e))}function Se(t){t.T=E()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=se(b(t.Va,t),e)}function Ne(t){t.o&&(h.clearTimeout(t.o),t.o=null)}function xe(t){0==t.g.v||t.A||Wn(t.g,t)}function De(t){Ne(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,jt(t.R),Xt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ke(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hn(n.b,t)))if(n.I=t.N,!t.C&&hn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(qf){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Yn(n),Ln(n)}jn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=se(b(n.Sa,n),6e3));if(1>=ln(n.b)&&n.ea){try{n.ea()}catch(qf){}n.ea=void 0}}else Qn(n,11)}else if((t.C||n.a==t)&&Yn(n),!N(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(k(l,"spdy")||k(l,"quic")||k(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,je(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=E()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=$n(u,u.C?u.ga:null,u.fa),d.C){dn(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Ne(p),Se(p)),u.a=d}else Bn(u);0<n.g.length&&Vn(n)}else"stop"!=i[0]&&"close"!=i[0]||Qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Qn(n,7):Pn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(qf){}}function Re(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"===typeof t)A(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(d(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Le(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Le(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(u=ge.prototype).setTimeout=function(t){this.P=t},u.Xa=function(t){t=t.target;var e=this.F;e&&3==Dn(t)?e.f():this.Ca(t)},u.Ca=function(t){try{if(t==this.a)t:{var e=Dn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!K&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),Ne(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),De(this),xe(this);break t}Jt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ke(this,u)}this.I?(_e(this,e,o),K&&this.b&&3==e&&(Qt(this.J,this.R,"tick",this.Wa),this.R.start())):(Jt(this.c,this.f,o,null),ke(this,o)),4==e&&De(this),this.b&&!this.A&&(4==e?Wn(this.g,this):(this.b=!1,Se(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),De(this),xe(this)}}}catch(c){}},u.Wa=function(){if(this.a){var t=Dn(this.a),e=this.a.$();this.D<e.length&&(Ne(this),_e(this,t,e),this.b&&4!=t&&Se(this))}},u.cancel=function(){this.A=!0,De(this)},u.Va=function(){this.o=null;var t=E();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),De(this),this.h=2,xe(this)):Ce(this,this.T-t)},(u=Oe.prototype).K=function(){Pe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},u.L=function(){return Pe(this),this.a.concat()},u.get=function(t,e){return Le(this.b,t)?this.b[t]:e},u.set=function(t,e){Le(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},u.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fe){this.a=void 0!==e?e:t.a,He(this,t.f),this.j=t.j,qe(this,t.c),Ue(this,t.h),this.g=t.g,e=t.b;var n=new Ze;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),Be(this,n),this.i=t.i}else t&&(n=String(t).match(Me))?(this.a=!!e,He(this,n[1]||"",!0),this.j=ze(n[2]||""),qe(this,n[3]||"",!0),Ue(this,n[4]),this.g=ze(n[5]||"",!0),Be(this,n[6]||"",!0),this.i=ze(n[7]||"")):(this.a=!!e,this.b=new Ze(null,this.a))}function Ve(t){return new Fe(t)}function He(t,e,n){t.f=n?ze(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function qe(t,e,n){t.c=n?ze(e,!0):e}function Ue(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Be(t,e,n){e instanceof Ze?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ye(e,$e)),t.b=new Ze(e,t.a))}function je(t,e,n){t.b.set(e,n)}function Ke(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^E()).toString(36)),t}function ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ye(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,We),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function We(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ye(e,Ge,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ye(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ye(n,"/"==n.charAt(0)?Xe:Qe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ye(n,Je)),t.join("")};var Ge=/[#\/\?@]/g,Qe=/[#\?:]/g,Xe=/[#\?]/g,$e=/[#\?@]/g,Je=/#/g;function Ze(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Le(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Le((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pe(t)))}function nn(t,e){return tn(t),e=on(t,e),Le(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),C(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(u=Ze.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},u.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){A(n,(function(n){t.call(e,n,r,this)}),this)}),this)},u.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},u.K=function(t){tn(this);var e=[];if("string"===typeof t)nn(this,t)&&(e=S(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=S(e,t[n])}return e},u.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},u.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},u.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var an=function(t,e){this.b=t,this.a=e};function sn(t){this.g=t||un,h.PerformanceNavigationTiming?t=0<(t=h.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(h.ia&&h.ia.ya&&h.ia.ya()&&h.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var un=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ln(t){return t.b?1:t.a?t.a.size:0}function hn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fn(t,e){t.a?t.a.add(e):t.b=e}function dn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=s(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return C(t.c)}function vn(){}function mn(){this.a=new vn}function yn(t,e,n){var r=n||"";try{Re(t,(function(t,n){var i=t;p(t)&&(i=kt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Td){throw e.push(r+"type="+encodeURIComponent("_badmap")),Td}}function gn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}sn.prototype.cancel=function(){var t,e;if(this.c=pn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=s(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return h.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return h.JSON.parse(t,void 0)};var bn=h.JSON.parse;function wn(t){Nt.call(this),this.headers=new Oe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}I(wn,Nt);var En="",In=/^https?$/i,Tn=["POST","PUT"];function _n(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Sn(t),Nn(t)}function Sn(t){t.u||(t.u=!0,xt(t,"complete"),xt(t,"error"))}function Cn(t){if(t.b&&"undefined"!=typeof l&&(!t.s[1]||4!=Dn(t)||2!=t.W()))if(t.l&&4==Dn(t))Kt(t.za,0,t);else if(xt(t,"readystatechange"),4==Dn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Me)[1]||null;if(!o&&h.self&&h.self.location){var a=h.self.location.protocol;o=a.substr(0,a.length-1)}i=!In.test(o?o.toLowerCase():"")}e=i}if(e)xt(t,"complete"),xt(t,"success");else{t.h=6;try{var s=2<Dn(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Sn(t)}}finally{Nn(t)}}}function Nn(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?f:null;t.a=null,t.s=null,e||xt(t,"ready");try{n.onreadystatechange=r}catch(Td){}}}function xn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(h.clearTimeout(t.m),t.m=null)}function Dn(t){return t.a?t.a.readyState:0}function kn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):je(t,e,n))}function Rn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.pa=0,this.g=[],this.c=new $t,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Rn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Rn("baseRetryDelayMs",5e3,t),this.Ra=Rn("retryDelaySeedMs",1e4,t),this.Ma=Rn("forwardChannelMaxRetries",2,t),this.ma=Rn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(t&&t.concurrentRequestLimit),this.ka=new mn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Pn(t){if(Mn(t),3==t.v){var e=t.R++,n=Ve(t.B);je(n,"SID",t.J),je(n,"RID",e),je(n,"TYPE","terminate"),qn(t,n),(e=new ge(t,t.c,e,void 0)).H=2,e.i=Ke(Ve(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(e.i.toString(),"")),!n&&h.Image&&((new Image).src=e.i,n=!0),n||(e.a=Jn(e.g,null),e.a.ba(e.i)),e.u=E(),Se(e)}Xn(t)}function Ln(t){t.a&&(Kn(t),t.a.cancel(),t.a=null)}function Mn(t){Ln(t),t.j&&(h.clearTimeout(t.j),t.j=null),Yn(t),t.b.cancel(),t.h&&("number"===typeof t.h&&h.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.g.push(new an(t.Oa++,e)),3==t.v&&Vn(t)}function Vn(t){cn(t.b)||t.h||(t.h=!0,Vt(t.Ba,t),t.u=0)}function Hn(t,e){var n;n=e?e.f:t.R++;var r=Ve(t.B);je(r,"SID",t.J),je(r,"RID",n),je(r,"AID",t.P),qn(t,r),t.i&&t.l&&kn(r,t.i,t.l),n=new ge(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Un(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fn(t.b,n),Ie(n,r,e)}function qn(t,e){t.f&&Re({},(function(t,n){je(e,n,t)}))}function Un(t,e,n){n=Math.min(t.g.length,n);var r=t.f?b(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{yn(l,a,"req"+c+"_")}catch(Or){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Bn(t){t.a||t.j||(t.T=1,Vt(t.Aa,t),t.o=0)}function jn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=se(b(t.Aa,t),Gn(t,t.o)),t.o++,!0)}function Kn(t){null!=t.s&&(h.clearTimeout(t.s),t.s=null)}function zn(t){t.a=new ge(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ve(t.la);je(e,"RID","rpc"),je(e,"SID",t.J),je(e,"CI",t.H?"0":"1"),je(e,"AID",t.P),qn(t,e),je(e,"TYPE","xmlhttp"),t.i&&t.l&&kn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ke(Ve(e)),n.j=null,n.I=!0,Te(n,t)}function Yn(t){null!=t.m&&(h.clearTimeout(t.m),t.m=null)}function Wn(t,e){var n=null;if(t.a==e){Yn(t),Kn(t),t.a=null;var r=2}else{if(!hn(t.b,e))return;n=e.s,dn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=E()-e.u;var i=t.u;xt(r=ee(),new ae(r,n,e,i)),Vn(t)}else Bn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ln(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=se(b(t.Ba,t,e),Gn(t,t.u)),t.u++,!0))}(t,e)||2==r&&jn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Qn(t,5);break;case 4:Qn(t,10);break;case 3:Qn(t,6);break;default:Qn(t,2)}}function Gn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Qn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=b(t.Ya,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||He(n,"https"),Ke(n)),function(t,e){var n=new $t;if(h.Image){var r=new Image;r.onload=w(gn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(gn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(gn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(gn,n,r,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Xn(t),Mn(t)}function Xn(t){t.v=0,t.I=-1,t.f&&(0==pn(t.b).length&&0==t.g.length||(t.b.c.length=0,C(t.g),t.g.length=0),t.f.qa())}function $n(t,e,n){var r=function(t){return t instanceof Fe?Ve(t):new Fe(t,void 0)}(n);if(""!=r.c)e&&qe(r,e+"."+r.c),Ue(r,r.h);else{var i=h.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&He(i,t),e&&qe(i,e),n&&Ue(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,(function(t,e){je(r,e,t)})),e=t.A,n=t.na,e&&n&&je(r,e,n),je(r,"VER",t.ha),qn(t,r),r}function Jn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Na)).F=t.C,e}function Zn(){}function tr(){if(B&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function er(t,e){Nt.call(this),this.a=new On(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new ir(this)}function nr(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){me.call(this),this.status=1}function ir(t){this.a=t}(u=wn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(de),this.a.onreadystatechange=b(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void An(this,o)}t=n||"";var i=new Oe(this.headers);r&&Re(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=_n,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.L()),n=h.FormData&&t instanceof h.FormData,!(0<=_(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=function(t){return B&&Z(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.xa,this)):this.m=Kt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){An(this,o)}},u.xa=function(){"undefined"!=typeof l&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,xt(this,"timeout"),this.abort(8))},u.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,xt(this,"complete"),xt(this,"abort"),Nn(this))},u.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Nn(this,!0)),wn.X.G.call(this)},u.za=function(){this.j||(this.A||this.l||this.g?Cn(this):this.Ua())},u.Ua=function(){Cn(this)},u.W=function(){try{return 2<Dn(this)?this.a.status:-1}catch(t){return-1}},u.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},u.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},u.ua=function(){return this.h},u.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(u=On.prototype).ha=8,u.v=1,u.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ge(this,this.c,t,void 0),r=this.l;if(this.O&&(r?V(r=M(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Un(this,n,e),je(i=Ve(this.B),"RID",t),je(i,"CVER",22),this.A&&je(i,"X-HTTP-Session-Id",this.A),qn(this,i),this.i&&r&&kn(i,this.i,r),fn(this.b,n),this.Ia&&je(i,"TYPE","init"),this.da?(je(i,"$req",e),je(i,"SID","null"),n.U=!0,Ie(n,i,null)):Ie(n,i,e),this.v=2}}else 3==this.v&&(t?Hn(this,t):0==this.g.length||cn(this.b)||Hn(this))},u.Aa=function(){if(this.j=null,zn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=se(b(this.Ta,this),t)}},u.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,oe(10),Ln(this),zn(this))},u.Sa=function(){null!=this.m&&(this.m=null,Ln(this),jn(this),oe(19))},u.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(u=Zn.prototype).ta=function(){},u.sa=function(){},u.ra=function(){},u.qa=function(){},u.Ja=function(){},tr.prototype.a=function(t,e){return new er(t,e)},I(er,Nt),er.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=$n(t,null,t.fa),Vn(t)},er.prototype.close=function(){Pn(this.a)},er.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,Fn(this.a,e)}else this.l?((e={}).__data__=kt(t),Fn(this.a,e)):Fn(this.a,t)},er.prototype.G=function(){this.a.f=null,delete this.f,Pn(this.a),delete this.a,er.X.G.call(this)},I(nr,ve),I(rr,me),I(ir,Zn),ir.prototype.ta=function(){xt(this.a,"a")},ir.prototype.sa=function(t){xt(this.a,new nr(t))},ir.prototype.ra=function(t){xt(this.a,new rr(t))},ir.prototype.qa=function(){xt(this.a,"b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.h,er.prototype.open=er.prototype.g,er.prototype.close=er.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",fe.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",Nt.prototype.listen=Nt.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.W,wn.prototype.getResponseJson=wn.prototype.Pa,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var or=function(){return new tr},ar=function(){return ee()},sr=ue,ur=ce,cr=Zt,lr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},hr=fe,fr=wn;var dr=n(6326),pr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();pr.o=-1;var vr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,dr.C6)(e,t),e}(Error),yr=new o.Vy("@firebase/firestore");function gr(){return yr.logLevel}function br(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=o.$b.DEBUG){var r=e.map(Ir);yr.debug.apply(yr,(0,dr.fX)(["Firestore (8.3.2): "+t],r))}}function wr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=o.$b.ERROR){var r=e.map(Ir);yr.error.apply(yr,(0,dr.fX)(["Firestore (8.3.2): "+t],r))}}function Er(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=o.$b.WARN){var r=e.map(Ir);yr.warn.apply(yr,(0,dr.fX)(["Firestore (8.3.2): "+t],r))}}function Ir(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Tr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.2) INTERNAL ASSERTION FAILED: "+t;throw wr(e),new Error(e)}function _r(t,e){t||Tr()}function Ar(t,e){return t}function Sr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62),n="";n.length<20;)for(var r=Sr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%62));return n},t}();function Nr(t,e){return t<e?-1:t>e?1:0}function xr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Dr(t){return t+"\0"}var kr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mr(vr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mr(vr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new mr(vr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mr(vr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Nr(this.nanoseconds,t.nanoseconds):Nr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Rr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new kr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Or(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Mr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Tr(),void 0===n?n=t.length-e:n>t.length-e&&Tr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new mr(vr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Mr),Vr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Vr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new mr(vr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new mr(vr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new mr(vr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new mr(vr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Mr),qr=function(){function t(t){this.fields=t,t.sort(Hr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return xr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ur=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Nr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Ur.EMPTY_BYTE_STRING=new Ur("");var Br=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(_r(!!t),"string"==typeof t){var e=0,n=Br.exec(t);if(_r(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Kr(t.seconds),nanos:Kr(t.nanos)}}function Kr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zr(t){return"string"==typeof t?Ur.fromBase64String(t):Ur.fromUint8Array(t)}function Yr(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wr(t){var e=t.mapValue.fields.__previous_value__;return Yr(e)?Wr(e):e}function Gr(t){var e=jr(t.mapValue.fields.__local_write_time__.timestampValue);return new kr(e.seconds,e.nanos)}function Qr(t){return null==t}function Xr(t){return 0===t&&1/t==-1/0}function $r(t){return"number"==typeof t&&Number.isInteger(t)&&!Xr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Jr=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Fr.fromString(e))},t.fromName=function(e){return new t(Fr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Fr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Fr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Fr(e.slice()))},t}();function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yr(t)?4:10:Tr()}function ti(t,e){var n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gr(t).isEqual(Gr(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=jr(t.timestampValue),r=jr(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return zr(t.bytesValue).isEqual(zr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Kr(t.geoPointValue.latitude)===Kr(e.geoPointValue.latitude)&&Kr(t.geoPointValue.longitude)===Kr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Kr(t.integerValue)===Kr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Kr(t.doubleValue),r=Kr(e.doubleValue);return n===r?Xr(n)===Xr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return xr(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Or(n)!==Or(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ti(n[i],r[i])))return!1;return!0}(t,e);default:return Tr()}}function ei(t,e){return void 0!==(t.values||[]).find((function(t){return ti(t,e)}))}function ni(t,e){var n=Zr(t),r=Zr(e);if(n!==r)return Nr(n,r);switch(n){case 0:return 0;case 1:return Nr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Kr(t.integerValue||t.doubleValue),r=Kr(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ri(t.timestampValue,e.timestampValue);case 4:return ri(Gr(t),Gr(e));case 5:return Nr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=zr(t),r=zr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Nr(n[i],r[i]);if(0!==o)return o}return Nr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Nr(Kr(t.latitude),Kr(e.latitude));return 0!==n?n:Nr(Kr(t.longitude),Kr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ni(n[i],r[i]);if(o)return o}return Nr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Nr(r[a],o[a]);if(0!==s)return s;var u=ni(n[r[a]],i[o[a]]);if(0!==u)return u}return Nr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Tr()}}function ri(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Nr(t,e);var n=jr(t),r=jr(e),i=Nr(n.seconds,r.seconds);return 0!==i?i:Nr(n.nanos,r.nanos)}function ii(t){return oi(t)}function oi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=jr(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Jr.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=oi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+oi(t.fields[o])}return e+"}"}(t.mapValue):Tr();var e,n}function ai(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function si(t){return!!t&&"integerValue"in t}function ui(t){return!!t&&"arrayValue"in t}function ci(t){return!!t&&"nullValue"in t}function li(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hi(t){return!!t&&"mapValue"in t}var fi=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Hr.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return ti(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Zr(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=hi(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Hr.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!hi(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function di(t){var e=[];return Pr(t.fields||{},(function(t,n){var r=new Hr([t]);if(hi(n)){var i=di(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new qr(e)}var pi=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Rr.min(),fi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,fi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,fi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=fi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=fi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),vi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function mi(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new vi(t,e,n,r,i,o,a)}function yi(t){var e=Ar(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ii(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Qr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Di(e.startAt)),e.endAt&&(n+="|ub:",n+=Di(e.endAt)),e.h=n}return e.h}function gi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ri(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ti(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pi(t.startAt,e.startAt)&&Pi(t.endAt,e.endAt)}function bi(t){return Jr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var wi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,dr.C6)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ei(t,n,r):"array-contains"===n?new Ai(t,r):"in"===n?new Si(t,r):"not-in"===n?new Ci(t,r):"array-contains-any"===n?new Ni(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ii(t,n):new Ti(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ni(e,this.value)):null!==e&&Zr(this.value)===Zr(e)&&this.m(ni(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Tr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ei=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Jr.fromName(r.referenceValue),i}return(0,dr.C6)(e,t),e.prototype.matches=function(t){var e=Jr.comparator(t.key,this.key);return this.m(e)},e}(wi),Ii=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=_i("in",n),r}return(0,dr.C6)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(wi),Ti=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=_i("not-in",n),r}return(0,dr.C6)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(wi);function _i(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Jr.fromName(t.referenceValue)}))}var Ai=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,dr.C6)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ui(e)&&ei(e.arrayValue,this.value)},e}(wi),Si=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,dr.C6)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ei(this.value.arrayValue,e)},e}(wi),Ci=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,dr.C6)(e,t),e.prototype.matches=function(t){if(ei(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ei(this.value.arrayValue,e)},e}(wi),Ni=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,dr.C6)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ui(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ei(e.value.arrayValue,t)}))},e}(wi),xi=function(t,e){this.position=t,this.before=e};function Di(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ii(t)})).join(",")}var ki=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ri(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Oi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Jr.comparator(Jr.fromName(a.referenceValue),n.key):ni(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Pi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}var Li=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Mi(t,e,n,r,i,o,a,s){return new Li(t,e,n,r,i,o,a,s)}function Fi(t){return new Li(t)}function Vi(t){return!Qr(t.limit)&&"F"===t.limitType}function Hi(t){return!Qr(t.limit)&&"L"===t.limitType}function qi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ui(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Bi(t){return null!==t.collectionGroup}function ji(t){var e=Ar(t);if(null===e.p){e.p=[];var n=Ui(e),r=qi(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ki(n)),e.p.push(new ki(Hr.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ki(Hr.keyField(),u))}}}return e.p}function Ki(t){var e=Ar(t);if(!e.T)if("F"===e.limitType)e.T=mi(e.path,e.collectionGroup,ji(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ji(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new ki(o.field,a))}var s=e.endAt?new xi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new xi(e.startAt.position,!e.startAt.before):null;e.T=mi(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function zi(t,e,n){return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yi(t,e){return gi(Ki(t),Ki(e))&&t.limitType===e.limitType}function Wi(t){return yi(Ki(t))+"|lt:"+t.limitType}function Gi(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ii(e.value);var e})).join(", ")+"]"),Qr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Di(t.startAt)),t.endAt&&(e+=", endAt: "+Di(t.endAt)),"Target("+e+")"}(Ki(t))+"; limitType="+t.limitType+")"}function Qi(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Jr.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Oi(t.startAt,ji(t),e))&&(!t.endAt||!Oi(t.endAt,ji(t),e))}(t,e)}function Xi(t){return function(e,n){for(var r=!1,i=0,o=ji(t);i<o.length;i++){var a=o[i],s=$i(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function $i(t,e,n){var r=t.field.isKeyField()?Jr.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ni(r,i):Tr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Tr()}}function Ji(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xr(e)?"-0":e}}function Zi(t){return{integerValue:""+t}}function to(t,e){return $r(e)?Zi(e):Ji(t,e)}var eo=function(){this._=void 0};function no(t,e,n){return t instanceof oo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ao?so(t,e):t instanceof uo?co(t,e):function(t,e){var n=io(t,e),r=ho(n)+ho(t.A);return si(n)&&si(t.A)?Zi(r):Ji(t.R,r)}(t,e)}function ro(t,e,n){return t instanceof ao?so(t,e):t instanceof uo?co(t,e):n}function io(t,e){return t instanceof lo?si(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e}(eo),ao=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,dr.C6)(e,t),e}(eo);function so(t,e){for(var n=fo(e),r=function(t){n.some((function(e){return ti(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var uo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,dr.C6)(e,t),e}(eo);function co(t,e){for(var n=fo(e),r=function(t){n=n.filter((function(e){return!ti(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var lo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,dr.C6)(e,t),e}(eo);function ho(t){return Kr(t.integerValue||t.doubleValue)}function fo(t){return ui(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var po=function(t,e){this.field=t,this.transform=e},vo=function(t,e){this.version=t,this.transformResults=e},mo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function yo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var go=function(){};function bo(t,e,n){t instanceof _o?function(t,e,n){var r=t.value.clone(),i=Co(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Ao?function(t,e,n){if(yo(t.precondition,e)){var r=Co(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(So(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n){t instanceof _o?function(t,e,n){if(yo(t.precondition,e)){var r=t.value.clone(),i=No(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(To(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Ao?function(t,e,n){if(yo(t.precondition,e)){var r=No(t.fieldTransforms,n,e),i=e.data;i.setAll(So(t)),i.setAll(r),e.convertToFoundDocument(To(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){yo(t.precondition,e)&&e.convertToNoDocument(Rr.min())}(t,e)}function Eo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=io(o.transform,a||null);null!=s&&(null==n&&(n=fi.empty()),n.set(o.field,s))}return n||null}function Io(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&xr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ao&&e instanceof ao||t instanceof uo&&e instanceof uo?xr(t.elements,e.elements,ti):t instanceof lo&&e instanceof lo?ti(t.A,e.A):t instanceof oo&&e instanceof oo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function To(t){return t.isFoundDocument()?t.version:Rr.min()}var _o=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,dr.C6)(e,t),e}(go),Ao=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,dr.C6)(e,t),e}(go);function So(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Co(t,e,n){var r=new Map;_r(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,ro(a,s,n[i]))}return r}function No(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,no(s,u,e))}return r}var xo,Do,ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,dr.C6)(e,t),e}(go),Ro=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,dr.C6)(e,t),e}(go),Oo=function(t){this.count=t};function Po(t){switch(t){case vr.OK:return Tr();case vr.CANCELLED:case vr.UNKNOWN:case vr.DEADLINE_EXCEEDED:case vr.RESOURCE_EXHAUSTED:case vr.INTERNAL:case vr.UNAVAILABLE:case vr.UNAUTHENTICATED:return!1;case vr.INVALID_ARGUMENT:case vr.NOT_FOUND:case vr.ALREADY_EXISTS:case vr.PERMISSION_DENIED:case vr.FAILED_PRECONDITION:case vr.ABORTED:case vr.OUT_OF_RANGE:case vr.UNIMPLEMENTED:case vr.DATA_LOSS:return!0;default:return Tr()}}function Lo(t){if(void 0===t)return wr("GRPC error has no .code"),vr.UNKNOWN;switch(t){case xo.OK:return vr.OK;case xo.CANCELLED:return vr.CANCELLED;case xo.UNKNOWN:return vr.UNKNOWN;case xo.DEADLINE_EXCEEDED:return vr.DEADLINE_EXCEEDED;case xo.RESOURCE_EXHAUSTED:return vr.RESOURCE_EXHAUSTED;case xo.INTERNAL:return vr.INTERNAL;case xo.UNAVAILABLE:return vr.UNAVAILABLE;case xo.UNAUTHENTICATED:return vr.UNAUTHENTICATED;case xo.INVALID_ARGUMENT:return vr.INVALID_ARGUMENT;case xo.NOT_FOUND:return vr.NOT_FOUND;case xo.ALREADY_EXISTS:return vr.ALREADY_EXISTS;case xo.PERMISSION_DENIED:return vr.PERMISSION_DENIED;case xo.FAILED_PRECONDITION:return vr.FAILED_PRECONDITION;case xo.ABORTED:return vr.ABORTED;case xo.OUT_OF_RANGE:return vr.OUT_OF_RANGE;case xo.UNIMPLEMENTED:return vr.UNIMPLEMENTED;case xo.DATA_LOSS:return vr.DATA_LOSS;default:return Tr()}}(Do=xo||(xo={}))[Do.OK=0]="OK",Do[Do.CANCELLED=1]="CANCELLED",Do[Do.UNKNOWN=2]="UNKNOWN",Do[Do.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Do[Do.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Do[Do.NOT_FOUND=5]="NOT_FOUND",Do[Do.ALREADY_EXISTS=6]="ALREADY_EXISTS",Do[Do.PERMISSION_DENIED=7]="PERMISSION_DENIED",Do[Do.UNAUTHENTICATED=16]="UNAUTHENTICATED",Do[Do.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Do[Do.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Do[Do.ABORTED=10]="ABORTED",Do[Do.OUT_OF_RANGE=11]="OUT_OF_RANGE",Do[Do.UNIMPLEMENTED=12]="UNIMPLEMENTED",Do[Do.INTERNAL=13]="INTERNAL",Do[Do.UNAVAILABLE=14]="UNAVAILABLE",Do[Do.DATA_LOSS=15]="DATA_LOSS";var Mo=function(){function t(t,e){this.comparator=t,this.root=e||Vo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Fo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Fo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Fo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Fo(this.root,t,this.comparator,!0)},t}(),Fo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Vo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Tr();if(this.right.isRed())throw Tr();var t=this.left.check();if(t!==this.right.check())throw Tr();return t+(this.isRed()?0:1)},t}();Vo.EMPTY=null,Vo.RED=!0,Vo.BLACK=!1,Vo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Vo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ho=function(){function t(t){this.comparator=t,this.data=new Mo(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new qo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new qo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),qo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Uo=new Mo(Jr.comparator);function Bo(){return Uo}var jo=new Mo(Jr.comparator);function Ko(){return jo}var zo=new Mo(Jr.comparator);function Yo(){return zo}var Wo=new Ho(Jr.comparator);function Go(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Wo,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Qo=new Ho(Nr);function Xo(){return Qo}var $o=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Jo.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Rr.min(),r,Xo(),Bo(),Go())},t}(),Jo=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Ur.EMPTY_BYTE_STRING,n,Go(),Go(),Go())},t}(),Zo=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ta=function(t,e){this.targetId=t,this.V=e},ea=function(t,e,n,r){void 0===n&&(n=Ur.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},na=function(){function t(){this.S=0,this.D=oa(),this.C=Ur.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Go(),e=Go(),n=Go();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Tr()}})),new Jo(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=oa()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ra=function(){function t(t){this.W=t,this.G=new Map,this.H=Bo(),this.J=ia(),this.Y=new Ho(Nr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Tr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(bi(i))if(0===n){var o=new Jr(i.path);this.tt(e,o,pi.newNoDocument(o,Rr.min()))}else _r(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&bi(o.target)){var a=new Jr(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,pi.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Go();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new $o(t,n,this.Y,this.H,r);return this.H=Bo(),this.J=ia(),this.Y=new Ho(Nr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new na,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ho(Nr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||br("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new na),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ia(){return new Mo(Jr.comparator)}function oa(){return new Mo(Jr.comparator)}var aa={asc:"ASCENDING",desc:"DESCENDING"},sa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ua=function(t,e){this.databaseId=t,this.I=e};function ca(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function la(t,e){return t.I?e.toBase64():e.toUint8Array()}function ha(t,e){return ca(t,e.toTimestamp())}function fa(t){return _r(!!t),Rr.fromTimestamp(function(t){var e=jr(t);return new kr(e.seconds,e.nanos)}(t))}function da(t,e){return function(t){return new Fr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function pa(t){var e=Fr.fromString(t);return _r(Va(e)),e}function va(t,e){return da(t.databaseId,e.path)}function ma(t,e){var n=pa(e);if(n.get(1)!==t.databaseId.projectId)throw new mr(vr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new mr(vr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Jr(wa(n))}function ya(t,e){return da(t.databaseId,e)}function ga(t){var e=pa(t);return 4===e.length?Fr.emptyPath():wa(e)}function ba(t){return new Fr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wa(t){return _r(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ea(t,e,n){return{name:va(t,e),fields:n.toProto().mapValue.fields}}function Ia(t,e,n){var r=ma(t,e.name),i=fa(e.updateTime),o=new fi({mapValue:{fields:e.fields}}),a=pi.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ta(t,e){var n;if(e instanceof _o)n={update:Ea(t,e.key,e.value)};else if(e instanceof ko)n={delete:va(t,e.key)};else if(e instanceof Ao)n={update:Ea(t,e.key,e.data),updateMask:Fa(e.fieldMask)};else{if(!(e instanceof Ro))return Tr();n={verify:va(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof oo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ao)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof uo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lo)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Tr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ha(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Tr()}(t,e.precondition)),n}function _a(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?mo.updateTime(fa(t.updateTime)):void 0!==t.exists?mo.exists(t.exists):mo.none()}(e.currentDocument):mo.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)_r("REQUEST_TIME"===e.setToServerValue),n=new oo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ao(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new uo(i)}else"increment"in e?n=new lo(t,e.increment):Tr();var o=Hr.fromServerFormat(e.fieldPath);return new po(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ma(t,e.update.name),o=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new qr(e.map((function(t){return Hr.fromServerFormat(t)})))}(e.updateMask);return new Ao(i,o,a,n,r)}return new _o(i,o,n,r)}if(e.delete){var s=ma(t,e.delete);return new ko(s,n)}if(e.verify){var u=ma(t,e.verify);return new Ro(u,n)}return Tr()}function Aa(t,e){return{documents:[ya(t,e.path)]}}function Sa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ya(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ya(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(li(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NAN"}};if(ci(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(li(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NAN"}};if(ci(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(t.field),op:Ra(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Oa(t.field),direction:ka(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Qr(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=xa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=xa(e.endAt)),n}function Ca(t){var e=ga(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_r(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Na(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new ki(Pa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Qr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Da(n.startAt));var l=null;return n.endAt&&(l=Da(n.endAt)),Mi(e,i,s,a,u,"F",c,l)}function Na(t){return t?void 0!==t.unaryFilter?[Ma(t)]:void 0!==t.fieldFilter?[La(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Na(t)})).reduce((function(t,e){return t.concat(e)})):Tr():[]}function xa(t){return{before:t.before,values:t.position}}function Da(t){var e=!!t.before,n=t.values||[];return new xi(n,e)}function ka(t){return aa[t]}function Ra(t){return sa[t]}function Oa(t){return{fieldPath:t.canonicalString()}}function Pa(t){return Hr.fromServerFormat(t.fieldPath)}function La(t){return wi.create(Pa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ma(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Pa(t.unaryFilter.field);return wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Pa(t.unaryFilter.field);return wi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pa(t.unaryFilter.field);return wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pa(t.unaryFilter.field);return wi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Tr()}}function Fa(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Va(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ha(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ua(e)),e=qa(t.get(n),e);return Ua(e)}function qa(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ua(t){return t+"\x01\x01"}function Ba(t){var e=t.length;if(_r(e>=2),2===e)return _r("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Fr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Tr(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Tr()}o=a+2}return new Fr(r)}var ja=function(t,e){this.seconds=t,this.nanoseconds=e},Ka=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ka.store="owner",Ka.key="owner";var za=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};za.store="mutationQueues",za.keyPath="userId";var Ya=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ya.store="mutations",Ya.keyPath="batchId",Ya.userMutationsIndex="userMutationsIndex",Ya.userMutationsKeyPath=["userId","batchId"];var Wa=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ha(e)]},t.key=function(t,e,n){return[t,Ha(e),n]},t}();Wa.store="documentMutations",Wa.PLACEHOLDER=new Wa;var Ga=function(t,e){this.path=t,this.readTime=e},Qa=function(t,e){this.path=t,this.version=e},Xa=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Xa.store="remoteDocuments",Xa.readTimeIndex="readTimeIndex",Xa.readTimeIndexPath="readTime",Xa.collectionReadTimeIndex="collectionReadTimeIndex",Xa.collectionReadTimeIndexPath=["parentPath","readTime"];var $a=function(t){this.byteSize=t};$a.store="remoteDocumentGlobal",$a.key="remoteDocumentGlobalKey";var Ja=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ja.store="targets",Ja.keyPath="targetId",Ja.queryTargetsIndexName="queryTargetsIndex",Ja.queryTargetsKeyPath=["canonicalId","targetId"];var Za=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Za.store="targetDocuments",Za.keyPath=["targetId","path"],Za.documentTargetsIndex="documentTargetsIndex",Za.documentTargetsKeyPath=["path","targetId"];var ts=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ts.key="targetGlobalKey",ts.store="targetGlobal";var es=function(t,e){this.collectionId=t,this.parent=e};es.store="collectionParents",es.keyPath=["collectionId","parent"];var ns=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ns.store="clientMetadata",ns.keyPath="clientId";var rs=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};rs.store="bundles",rs.keyPath="bundleId";var is=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};is.store="namedQueries",is.keyPath="name";var os=(0,dr.fX)((0,dr.fX)([],(0,dr.fX)((0,dr.fX)([],(0,dr.fX)((0,dr.fX)([],(0,dr.fX)((0,dr.fX)([],[za.store,Ya.store,Wa.store,Xa.store,Ja.store,Ka.store,ts.store,Za.store]),[ns.store])),[$a.store])),[es.store])),[rs.store,is.store]),as="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ss=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),us=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},cs=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Tr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ls=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new us,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ds(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=gs(e.target.error);n.ft.reject(new ds(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ds(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(br("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new vs(e)},t}(),hs=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,i.ZQ)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return br("SimpleDb","Removing database:",t),ms(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,i.ZQ)(),n=t._t(e),r=0<n&&n<10,o=t.Et(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",PUBLIC_URL:"/first-ecommerce",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e,n=this;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(br("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ds(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new mr(vr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ds(t,n))},i.onupgradeneeded=function(t){br("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){br("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,dr.sH)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,dr.YH)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return(0,dr.YH)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=ls.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),cs.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,br("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),fs=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ms(this.Pt.delete())},t}(),ds=function(t){function e(e,n){var r=this;return(r=t.call(this,vr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,dr.C6)(e,t),e}(mr);function ps(t){return"IndexedDbTransactionError"===t.name}var vs=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(br("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(br("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ms(n)},t.prototype.add=function(t){return br("SimpleDb","ADD",this.store.name,t,t),ms(this.store.add(t))},t.prototype.get=function(t){var e=this;return ms(this.store.get(t)).next((function(n){return void 0===n&&(n=null),br("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return br("SimpleDb","DELETE",this.store.name,t),ms(this.store.delete(t))},t.prototype.count=function(){return br("SimpleDb","COUNT",this.store.name),ms(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){br("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new cs((function(n,r){e.onerror=function(t){var e=gs(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new cs((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new fs(i),a=e(i.primaryKey,i.value,o);if(a instanceof cs){var s=a.catch((function(t){return o.done(),cs.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return cs.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ms(t){return new cs((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=gs(t.target.error);n(e)}}))}var ys=!1;function gs(t){var e=hs._t((0,i.ZQ)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new mr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ys||(ys=!0,setTimeout((function(){throw r}),0)),r}}return t}var bs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,dr.C6)(e,t),e}(ss);function ws(t,e){var n=Ar(t);return hs.It(n.Mt,e)}var Es=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&bo(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&wo(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&wo(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Rr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Go())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&xr(this.mutations,t.mutations,(function(t,e){return Io(t,e)}))&&xr(this.baseMutations,t.baseMutations,(function(t,e){return Io(t,e)}))},t}(),Is=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){_r(e.mutations.length===r.length);for(var i=Yo(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ts=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Rr.min()),void 0===o&&(o=Rr.min()),void 0===a&&(a=Ur.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),_s=function(t){this.Lt=t};function As(t,e){if(e.document)return Ia(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Jr.fromSegments(e.noDocument.path),r=Ds(e.noDocument.readTime),i=pi.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Jr.fromSegments(e.unknownDocument.path);return r=Ds(e.unknownDocument.version),pi.newUnknownDocument(o,r)}return Tr()}function Ss(t,e,n){var r=Cs(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:va(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:ca(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new Xa(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=xs(e.version);return a=e.hasCommittedMutations,new Xa(null,new Ga(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=xs(e.version);return new Xa(new Qa(c,l),null,null,!0,r,i)}return Tr()}function Cs(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ns(t){var e=new kr(t[0],t[1]);return Rr.fromTimestamp(e)}function xs(t){var e=t.toTimestamp();return new ja(e.seconds,e.nanoseconds)}function Ds(t){var e=new kr(t.seconds,t.nanoseconds);return Rr.fromTimestamp(e)}function ks(t,e){for(var n=(e.baseMutations||[]).map((function(e){return _a(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return _a(t.Lt,e)})),s=kr.fromMillis(e.localWriteTimeMs);return new Es(e.batchId,s,n,a)}function Rs(t){var e,n,r=Ds(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ds(t.lastLimboFreeSnapshotVersion):Rr.min();return void 0!==t.query.documents?(_r(1===(n=t.query).documents.length),e=Ki(Fi(ga(n.documents[0])))):e=function(t){return Ki(Ca(t))}(t.query),new Ts(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ur.fromBase64String(t.resumeToken))}function Os(t,e){var n,r=xs(e.snapshotVersion),i=xs(e.lastLimboFreeSnapshotVersion);n=bi(e.target)?Aa(t.Lt,e.target):Sa(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ja(e.targetId,yi(e.target),r,o,e.sequenceNumber,i,n)}function Ps(t){var e=Ca({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?zi(e,e.limit,"L"):e}var Ls=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ms(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ds(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Ms(t).put({bundleId:(n=e).id,createTime:xs(fa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Fs(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ps(e.bundledQuery),readTime:Ds(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Fs(t).put(function(t){return{name:t.name,readTime:xs(fa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ms(t){return ws(t,rs.store)}function Fs(t){return ws(t,is.store)}var Vs=function(){function t(){this.Bt=new Hs}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),cs.resolve()},t.prototype.getCollectionParents=function(t,e){return cs.resolve(this.Bt.getEntries(e))},t}(),Hs=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ho(Fr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ho(Fr.comparator)).toArray()},t}(),qs=function(){function t(){this.qt=new Hs}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Ha(i)};return Us(t).put(o)}return cs.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Dr(e),""],!1,!0);return Us(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ba(o.parent))}return n}))},t}();function Us(t){return ws(t,es.store)}var Bs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},js=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Ks(t,e,n){var r=t.store(Ya.store),i=t.store(Wa.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){_r(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Wa.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return cs.waitFor(o).next((function(){return c}))}function zs(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Tr();e=t.noDocument}return JSON.stringify(e).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);var Ys=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return _r(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gs(t).Ot({index:Ya.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Qs(t),a=Gs(t);return a.add({}).next((function(s){_r("number"==typeof s);for(var u=new Es(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ta(t.Lt,e)})),i=n.mutations.map((function(e){return Ta(t.Lt,e)}));return new Ya(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ho((function(t,e){return Nr(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Wa.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Wa.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),cs.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Gs(t).get(e).next((function(t){return t?(_r(t.userId===n.userId),ks(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?cs.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Gs(t).Ot({index:Ya.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(_r(e.batchId>=r),o=ks(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Gs(t).Ot({index:Ya.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gs(t).Nt(Ya.userMutationsIndex,n).next((function(t){return t.map((function(t){return ks(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Wa.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Qs(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ba(u);if(s===n.userId&&e.path.isEqual(l))return Gs(t).get(c).next((function(t){if(!t)throw Tr();_r(t.userId===n.userId),o.push(ks(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ho(Nr),i=[];return e.forEach((function(e){var o=Wa.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Qs(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Ba(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),cs.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Wa.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ho(Nr);return Qs(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Ba(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Gs(t).get(e).next((function(t){if(null===t)throw Tr();_r(t.userId===n.userId),r.push(ks(n.R,t))})))})),cs.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ks(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),cs.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return cs.resolve();var r=IDBKeyRange.lowerBound(Wa.prefixForUser(e.userId)),i=[];return Qs(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ba(t[1]);i.push(o)}else r.done()})).next((function(){_r(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Ws(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Xs(t).get(this.userId).next((function(t){return t||new za(e.userId,-1,"")}))},t}();function Ws(t,e,n){var r=Wa.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Qs(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Gs(t){return ws(t,Ya.store)}function Qs(t){return ws(t,Wa.store)}function Xs(t){return ws(t,za.store)}var $s=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Js=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new $s(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Rr.fromTimestamp(new kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Zs(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return _r(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Zs(t).Ot((function(a,s){var u=Rs(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return cs.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Zs(t).Ot((function(t,n){var r=Rs(n);e(r)}))},t.prototype.Xt=function(t){return tu(t).get(ts.key).next((function(t){return _r(null!==t),t}))},t.prototype.Zt=function(t,e){return tu(t).put(ts.key,e)},t.prototype.te=function(t,e){return Zs(t).put(Os(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=yi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Zs(t).Ot({range:r,index:Ja.queryTargetsIndexName},(function(t,n,r){var o=Rs(n);gi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=eu(t);return e.forEach((function(e){var a=Ha(e.path);i.push(o.put(new Za(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),cs.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=eu(t);return cs.forEach(e,(function(e){var o=Ha(e.path);return cs.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=eu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=eu(t),i=Go();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=Ba(t[1]),o=new Jr(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Ha(e.path),r=IDBKeyRange.bound([n],[Dr(n)],!1,!0),i=0;return eu(t).Ot({index:Za.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Zs(t).get(e).next((function(t){return t?Rs(t):null}))},t}();function Zs(t){return ws(t,Ja.store)}function tu(t){return ws(t,ts.store)}function eu(t){return ws(t,Za.store)}function nu(t){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){if(t.code!==vr.FAILED_PRECONDITION||t.message!==as)throw t;return br("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function ru(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Nr(n,i);return 0===a?Nr(r,o):a}var iu=function(){function t(t){this.ne=t,this.buffer=new Ho(ru),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ru(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ou=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;br("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,dr.sH)(e,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ps(e=n.sent())?(br("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,nu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),au=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return cs.resolve(pr.o);var r=new iu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(br("LruGarbageCollector","Garbage collection skipped; disabled"),cs.resolve(Bs)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(br("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Bs):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(br("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),gr()<=o.$b.DEBUG&&br("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),cs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),su=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new au(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return uu(t,n)},t.prototype.removeReference=function(t,e,n){return uu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return uu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Xs(t).$t((function(r){return Ws(t,r,e).next((function(t){return t&&(n=!0),cs.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),eu(t).delete([0,Ha(a.path)])}))}));i.push(u)}})).next((function(){return cs.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return uu(t,e)},t.prototype.we=function(t,e){var n,r=eu(t),i=pr.o;return r.Ot({index:Za.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==pr.o&&e(new Jr(Ba(n)),i),i=s,n=a):i=pr.o})).next((function(){i!==pr.o&&e(new Jr(Ba(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function uu(t,e){return eu(t).put(function(t,e){return new Za(0,Ha(t.path),e)}(e,t.currentSequenceNumber))}var cu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Pr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Lr(this.inner)},t}(),lu=function(){function t(){this.changes=new cu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Rr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:pi.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?cs.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),hu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return pu(t).put(vu(e),n)},t.prototype.removeEntry=function(t,e){var n=pu(t),r=vu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return pu(t).get(vu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return pu(t).get(vu(e)).next((function(t){return{document:n.ye(e,t),size:zs(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Bo();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Bo(),i=new Mo(Jr.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,zs(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return cs.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return pu(t).Ot({range:r},(function(t,e,r){for(var a=Jr.fromSegments(t);o&&Jr.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Bo(),o=e.path.length+1,a={};if(n.isEqual(Rr.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Cs(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Xa.collectionReadTimeIndex}return pu(t).Ot(a,(function(t,n,a){if(t.length===o){var s=As(r.R,n);e.path.isPrefixOf(s.key.path)?Qi(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new fu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return du(t).get($a.key).next((function(t){return _r(!!t),t}))},t.prototype.me=function(t,e){return du(t).put($a.key,e)},t.prototype.ye=function(t,e){if(e){var n=As(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Rr.min()))return n}return pi.newInvalidDocument(t)},t}(),fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new cu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,dr.C6)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ho((function(t,e){return Nr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Ss(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=zs(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Ss(e.Ie.R,pi.newNoDocument(o,Rr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),cs.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(lu);function du(t){return ws(t,$a.store)}function pu(t){return ws(t,Xa.store)}function vu(t){return t.path.toArray()}var mu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;_r(n<r&&n>=0&&r<=11);var o=new ls("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ka.store)}(t),function(t){t.createObjectStore(za.store,{keyPath:za.keyPath}),t.createObjectStore(Ya.store,{keyPath:Ya.keyPath,autoIncrement:!0}).createIndex(Ya.userMutationsIndex,Ya.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Wa.store)}(t),yu(t),function(t){t.createObjectStore(Xa.store)}(t));var a=cs.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Za.store),t.deleteObjectStore(Ja.store),t.deleteObjectStore(ts.store)}(t),yu(t)),a=a.next((function(){return function(t){var e=t.store(ts.store),n=new ts(0,0,Rr.min().toTimestamp(),0);return e.put(ts.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Ya.store).Nt().next((function(n){t.deleteObjectStore(Ya.store),t.createObjectStore(Ya.store,{keyPath:Ya.keyPath,autoIncrement:!0}).createIndex(Ya.userMutationsIndex,Ya.userMutationsKeyPath,{unique:!0});var r=e.store(Ya.store),i=n.map((function(t){return r.put(t)}));return cs.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(ns.store,{keyPath:ns.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore($a.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Xa.store);e.createIndex(Xa.readTimeIndex,Xa.readTimeIndexPath,{unique:!1}),e.createIndex(Xa.collectionReadTimeIndex,Xa.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(rs.store,{keyPath:rs.keyPath})}(t),function(t){t.createObjectStore(is.store,{keyPath:is.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(Xa.store).Ot((function(t,n){e+=zs(n)})).next((function(){var n=new $a(e);return t.store($a.store).put($a.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(za.store),r=t.store(Ya.store);return n.Nt().next((function(n){return cs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ya.userMutationsIndex,i).next((function(r){return cs.forEach(r,(function(r){_r(r.userId===n.userId);var i=ks(e.R,r);return Ks(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Za.store),n=t.store(Xa.store);return t.store(ts.store).get(ts.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new Fr(n),a=function(t){return[0,Ha(t)]}(o);r.push(e.get(a).next((function(n){return n?cs.resolve():function(n){return e.put(new Za(0,Ha(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return cs.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(es.store,{keyPath:es.keyPath});var n=e.store(es.store),r=new Hs,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ha(i)})}};return e.store(Xa.store).Ot({kt:!0},(function(t,e){var n=new Fr(t);return i(n.popLast())})).next((function(){return e.store(Wa.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ba(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Ja.store);return n.Ot((function(t,r){var i=Rs(r),o=Os(e.R,i);return n.put(o)}))},t}();function yu(t){t.createObjectStore(Za.store,{keyPath:Za.keyPath}).createIndex(Za.documentTargetsIndex,Za.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ja.store,{keyPath:Ja.keyPath}).createIndex(Ja.queryTargetsIndexName,Ja.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ts.store)}var gu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bu=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new mr(vr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new su(this,i),this.Le=n+"main",this.R=new _s(u),this.Be=new hs(this.Le,11,new mu(this.R)),this.qe=new Js(this.referenceDelegate,this.R),this.Ut=new qs,this.Ue=function(t,e){return new hu(t,e)}(this.R,this.Ut),this.Qe=new Ls,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new mr(vr.FAILED_PRECONDITION,gu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new pr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,dr.sH)(e,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,dr.sH)(e,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,dr.sH)(e,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Eu(e).put(new ns(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ps(e))return br("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return br("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return wu(t).get(Ka.key).next((function(t){return cs.resolve(e.tn(t))}))},t.prototype.en=function(t){return Eu(t).delete(this.clientId)},t.prototype.nn=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=ws(t,ns.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return cs.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?cs.resolve(!0):wu(t).get(Ka.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new mr(vr.FAILED_PRECONDITION,gu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Eu(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&br("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t=this;return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ka.store,ns.store],(function(e){var n=new bs(e,pr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Eu(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Ys.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;br("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,os,(function(o){return i=new bs(o,r.Ne?r.Ne.next():pr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw wr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new mr(vr.FAILED_PRECONDITION,as);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return wu(t).get(Ka.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new mr(vr.FAILED_PRECONDITION,gu)}))},t.prototype.Ze=function(t){var e=new Ka(this.clientId,this.allowTabSynchronization,Date.now());return wu(t).put(Ka.key,e)},t.yt=function(){return hs.yt()},t.prototype.Xe=function(t){var e=this,n=wu(t);return n.get(Ka.key).next((function(t){return e.tn(t)?(br("IndexedDbPersistence","Releasing primary lease."),n.delete(Ka.key)):cs.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(wr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return br("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return wr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){wr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function wu(t){return ws(t,Ka.store)}function Eu(t){return ws(t,ns.store)}function Iu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Tu=function(t,e){this.progress=t,this.wn=e},_u=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Jr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Bi(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Jr(e)).next((function(t){var e=Ko();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ko();return this.Ut.getCollectionParents(t,i).next((function(a){return cs.forEach(a,(function(a){var s=function(t,e){return new Li(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=pi.newInvalidDocument(c),r=r.insert(c,l)),wo(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Qi(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Go(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ao&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Au=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Go(),i=Go(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Su=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Rr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(a){var s=i.Cn(e,a);return(Vi(e)||Hi(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(gr()<=o.$b.DEBUG&&br("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Gi(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ho(Xi(t));return e.forEach((function(e,r){Qi(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return gr()<=o.$b.DEBUG&&br("QueryEngine","Using full collection scan to execute query:",Gi(e)),this.Sn.getDocumentsMatchingQuery(t,e,Rr.min())},t}(),Cu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Mo(Nr),this.kn=new cu((function(t){return yi(t)}),gi),this.On=Rr.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new _u(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Nu(t,e,n,r){return new Cu(t,e,n,r)}function xu(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o;return(0,dr.YH)(this,(function(a){switch(a.label){case 0:return n=Ar(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new _u(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Go(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];a=a.add(g.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Du(t,e){var n=Ar(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=cs.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);_r(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function ku(t){var e=Ar(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Ru(t,e){var n=Ar(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return _r(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Bo();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ou(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Rr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return cs.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Ou(t,e,n,r,i){var o=Go();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Bo();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Rr.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):br("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Pu(t,e){var n=Ar(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Lu(t,e){var n=Ar(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,cs.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ts(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Mu(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i,o,a;return(0,dr.YH)(this,(function(s){switch(s.label){case 0:r=Ar(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ps(a=s.sent()))throw a;return br("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Fu(t,e,n){var r=Ar(t),i=Rr.min(),o=Go();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ar(t),i=r.kn.get(n);return void 0!==i?cs.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ki(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Rr.min(),n?o:Go())})).next((function(t){return{documents:t,Bn:o}}))}))}function Vu(t,e){var n=Ar(t),r=Ar(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Hu(t){var e=Ar(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ar(t),i=Bo(),o=Cs(n),a=pu(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:Xa.readTimeIndex,range:s},(function(t,e){var n=As(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Ns(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function qu(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){return[2,(e=Ar(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=pu(t),n=Rr.min();return e.Ot({index:Xa.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ns(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function Uu(t,e,n,r){return(0,dr.sH)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return(0,dr.YH)(this,(function(p){switch(p.label){case 0:for(i=Ar(t),o=Go(),a=Bo(),s=Yo(),u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Lu(i,function(t){return Ki(Fi(Fr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ou(t,f,a,Rr.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Bu(t,e,n){return void 0===n&&(n=Go()),(0,dr.sH)(this,void 0,void 0,(function(){var r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return[4,Lu(t,Ki(Ps(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ar(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=fa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(Ur.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var ju=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return cs.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:fa(n.createTime)}),cs.resolve()},t.prototype.getNamedQuery=function(t,e){return cs.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ps(t.bundledQuery),readTime:fa(t.readTime)}}(e)),cs.resolve()},t}(),Ku=function(){function t(){this.Wn=new Ho(zu.Gn),this.zn=new Ho(zu.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new zu(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new zu(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Jr(new Fr([])),r=new zu(n,t),i=new zu(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Jr(new Fr([])),n=new zu(e,t),r=new zu(e,t+1),i=Go();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new zu(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),zu=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Jr.comparator(t.key,e.key)||Nr(t.ns,e.ns)},t.Hn=function(t,e){return Nr(t.ns,e.ns)||Jr.comparator(t.key,e.key)},t}(),Yu=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ho(zu.Gn)}return t.prototype.checkEmpty=function(t){return cs.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Es(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new zu(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return cs.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return cs.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return cs.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return cs.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return cs.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new zu(e,0),i=new zu(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),cs.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ho(Nr);return e.forEach((function(t){var e=new zu(t,0),i=new zu(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),cs.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Jr.isDocumentKey(i)||(i=i.child(""));var o=new zu(new Jr(i),0),a=new Ho(Nr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),cs.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;_r(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return cs.forEach(e.mutations,(function(i){var o=new zu(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new zu(e,0),r=this.rs.firstAfterOrEqual(n);return cs.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,cs.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Wu=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Mo(Jr.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return cs.resolve(n?n.document.clone():pi.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Bo();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():pi.newInvalidDocument(t))})),cs.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Bo(),i=new Jr(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Qi(e,c)&&(r=r.insert(c.key,c.clone()))}return cs.resolve(r)},t.prototype.fs=function(t,e){return cs.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Gu(this)},t.prototype.getSize=function(t){return cs.resolve(this.size)},t}(),Gu=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,dr.C6)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),cs.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(lu),Qu=function(){function t(t){this.persistence=t,this.ds=new cu((function(t){return yi(t)}),gi),this.lastRemoteSnapshotVersion=Rr.min(),this.highestTargetId=0,this.ws=0,this._s=new Ku,this.targetCount=0,this.ys=$s.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),cs.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return cs.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return cs.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),cs.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),cs.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new $s(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,cs.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),cs.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,cs.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),cs.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return cs.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return cs.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),cs.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),cs.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),cs.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return cs.resolve(n)},t.prototype.containsKey=function(t,e){return cs.resolve(this._s.containsKey(e))},t}(),Xu=function(){function t(t,e){var n=this;this.gs={},this.Ne=new pr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Qu(this),this.Ut=new Vs,this.Ue=function(t){return new Wu(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new _s(e),this.Qe=new ju(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Yu(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;br("MemoryPersistence","Starting transaction:",t);var i=new $u(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return cs.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),$u=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,dr.C6)(e,t),e}(ss),Ju=function(){function t(t){this.persistence=t,this.As=new Ku,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Tr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),cs.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),cs.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),cs.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cs.forEach(this.vs,(function(r){var i=Jr.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return cs.or([function(){return cs.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Zu=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function tc(t,e){return"firestore_clients_"+t+"_"+e}function ec(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function nc(t,e){return"firestore_targets_"+t+"_"+e}Zu.UNAUTHENTICATED=new Zu(null),Zu.GOOGLE_CREDENTIALS=new Zu("google-credentials-uid"),Zu.FIRST_PARTY=new Zu("first-party-uid");var rc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new mr(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(wr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ic=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new mr(i.error.code,i.error.message)),o?new t(e,i.state,r):(wr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),oc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Xo(),a=0;i&&a<r.activeTargetIds.length;++a)i=$r(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(wr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ac=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(wr("SharedClientState","Failed to parse online state: "+e),null)},t}(),sc=function(){function t(){this.activeTargetIds=Xo()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),uc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Mo(Nr),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=tc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new sc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return(0,dr.YH)(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(tc(this.persistenceKey,r)))&&(o=oc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)l=c[u],this.Fs(l);return this.Os=[],this.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(nc(this.persistenceKey,t));if(n){var r=ic.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(nc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return br("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){br("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){br("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(br("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,dr.sH)(e,void 0,void 0,(function(){var t,e,r,i,o,a;return(0,dr.YH)(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=pr.o;if(null!=t)try{var n=JSON.parse(t);_r("number"==typeof n),e=n}catch(t){wr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==pr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new rc(this.currentUser,t,e,n),i=ec(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ec(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=nc(this.persistenceKey,t),i=new ic(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return oc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rc.Vs(new Zu(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return ic.Vs(r,e)},t.prototype.js=function(t){return ac.Vs(t)},t.prototype.ii=function(t){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(br("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Xo();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),cc=function(){function t(){this.li=new sc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new sc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),lc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),hc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){br("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){br("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),fc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},dc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),pc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return(0,dr.C6)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new fr;a.listenOnce(ur.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case sr.NO_ERROR:var e=a.getResponseJson();br("Connection","XHR received:",JSON.stringify(e)),i(e);break;case sr.TIMEOUT:br("Connection",'RPC "'+t+'" timed out'),o(new mr(vr.DEADLINE_EXCEEDED,"Request time out"));break;case sr.HTTP_ERROR:var n=a.getStatus();if(br("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(vr).indexOf(e)>=0?e:vr.UNKNOWN}(r.status);o(new mr(s,r.message))}else o(new mr(vr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new mr(vr.UNAVAILABLE,"Connection failed."));break;default:Tr()}}finally{br("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=or(),o=ar(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,e),(0,i.jZ)()||(0,i.lV)()||(0,i.b8)()||(0,i.lT)()||(0,i.n4)()||(0,i.sr)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");br("Connection","Creating WebChannel: "+s,a);var u=r.createWebChannel(s,a),c=!1,l=!1,h=new dc({Ei:function(t){l?br("Connection","Not sending because WebChannel is closed:",t):(c||(br("Connection","Opening WebChannel transport."),u.open(),c=!0),br("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,hr.EventType.OPEN,(function(){l||br("Connection","WebChannel transport opened.")})),f(u,hr.EventType.CLOSE,(function(){l||(l=!0,br("Connection","WebChannel transport closed"),h.Vi())})),f(u,hr.EventType.ERROR,(function(t){l||(l=!0,Er("Connection","WebChannel transport errored:",t),h.Vi(new mr(vr.UNAVAILABLE,"The operation could not be completed")))})),f(u,hr.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];_r(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){br("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=xo[t];if(void 0!==e)return Lo(e)}(o),s=i.message;void 0===a&&(a=vr.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new mr(a,s)),u.close()}else br("Connection","WebChannel received:",n),h.Si(n)}})),f(o,cr.STAT_EVENT,(function(t){t.stat===lr.PROXY?br("Connection","Detected buffering proxy"):t.stat===lr.NOPROXY&&br("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);br("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return br("RestConnection","Received: ",t),t}),(function(e){throw Er("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.2",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=fc[t];return this.Di+"/v1/"+e+":"+n},t}());function vc(){return"undefined"!=typeof window?window:null}function mc(){return"undefined"!=typeof document?document:null}function yc(t){return new ua(t,!0)}var gc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&br("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),bc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new gc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===vr.RESOURCE_EXHAUSTED?(wr(e.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===vr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new mr(vr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,dr.sH)(t,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return br("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(br("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),wc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,dr.C6)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Tr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(_r(void 0===e||"string"==typeof e),Ur.fromBase64String(e||"")):(_r(void 0===e||e instanceof Uint8Array),Ur.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?vr.UNKNOWN:Lo(t.code);return new mr(e,t.message||"")}(s);n=new ea(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ma(t,r.document.name),o=fa(r.document.updateTime);var s=new fi({mapValue:{fields:r.document.fields}}),u=(a=pi.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Zo(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ma(t,r.document),o=r.readTime?fa(r.readTime):Rr.min(),s=pi.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Zo([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ma(t,r.document),o=r.removedTargetIds||[],n=new Zo([],o,i,null);else{if(!("filter"in e))return Tr();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Oo(r),o=l.targetId,n=new ta(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Rr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Rr.min():e.readTime?fa(e.readTime):Rr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ba(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=bi(r)?{documents:Aa(t,r)}:{query:Sa(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=la(t,e.resumeToken):e.snapshotVersion.compareTo(Rr.min())>0&&(n.readTime=ca(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ba(this.R),e.removeTarget=t,this.cr(e)},e}(bc),Ec=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,dr.C6)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(_r(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(_r(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?fa(t.updateTime):fa(e);return n.isEqual(Rr.min())&&(n=fa(e)),new vo(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=fa(t.commitTime);return this.listener.Tr(n,e)}return _r(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ba(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ta(e.R,t)}))};this.cr(n)},e}(bc),Ic=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,dr.C6)(e,t),e.prototype.br=function(){if(this.Rr)throw new mr(vr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw t.code===vr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw t.code===vr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Rr=!1},e}((function(){})),Tc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(wr(e),this.Vr=!1):br("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),_c=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,dr.sH)(o,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){switch(t.label){case 0:return Oc(this)?(br("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return(e=Ar(t)).$r.add(4),[4,Sc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Ac(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Tc(n,r)};function Ac(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e,n;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:if(!Oc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Sc(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e,n;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Cc(t,e){var n=Ar(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Rc(n)?kc(n):Gc(n).er()&&xc(n,e))}function Nc(t,e){var n=Ar(t),r=Gc(n);n.Or.delete(e),r.er()&&Dc(n,e),0===n.Or.size&&(r.er()?r.ir():Oc(n)&&n.Br.set("Unknown"))}function xc(t,e){t.qr.U(e.targetId),Gc(t).mr(e)}function Dc(t,e){t.qr.U(e),Gc(t).yr(e)}function kc(t){t.qr=new ra({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Gc(t).start(),t.Br.Sr()}function Rc(t){return Oc(t)&&!Gc(t).tr()&&t.Or.size>0}function Oc(t){return 0===Ar(t).$r.size}function Pc(t){t.qr=void 0}function Lc(t){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){return t.Or.forEach((function(e,n){xc(t,e)})),[2]}))}))}function Mc(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(n){return Pc(t),Rc(t)?(t.Br.Nr(e),kc(t)):t.Br.set("Unknown"),[2]}))}))}function Fc(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i,o;return(0,dr.YH)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof ea&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o;return(0,dr.YH)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),br("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Vc(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Zo?t.qr.X(e):e instanceof ta?t.qr.rt(e):t.qr.et(e),n.isEqual(Rr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,ku(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Ur.EMPTY_BYTE_STRING,n.snapshotVersion)),Dc(t,e);var r=new Ts(n.target,e,1,n.sequenceNumber);xc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return br("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Vc(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Vc(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r=this;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:if(!ps(e))throw e;return t.$r.add(1),[4,Sc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return ku(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,dr.sH)(r,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return br("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Ac(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Hc(t,e){return e().catch((function(n){return Vc(t,n,e)}))}function qc(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e,n,r,i,o;return(0,dr.YH)(this,(function(a){switch(a.label){case 0:e=Ar(t),n=Qc(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Oc(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Pu(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Qc(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Vc(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Uc(e)&&Bc(e),[2]}}))}))}function Uc(t){return Oc(t)&&!Qc(t).tr()&&t.kr.length>0}function Bc(t){Qc(t).start()}function jc(t){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){return Qc(t).Ar(),[2]}))}))}function Kc(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e,n,r,i;return(0,dr.YH)(this,(function(o){for(e=Qc(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function zc(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Is.from(r,e,n),[4,Hc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,qc(t)];case 2:return o.sent(),[2]}}))}))}function Yc(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return e&&Qc(t).pr?[4,function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return Po(r=e.code)&&r!==vr.ABORTED?(n=t.kr.shift(),Qc(t).sr(),[4,Hc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,qc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Uc(t)&&Bc(t),[2]}}))}))}function Wc(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return n=Ar(t),e?(n.$r.delete(2),[4,Ac(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Sc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Gc(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ar(t);return r.br(),new wc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Lc.bind(null,t),Ri:Mc.bind(null,t),_r:Fc.bind(null,t)}),t.Mr.push((function(n){return(0,dr.sH)(e,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Rc(t)?kc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Pc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Qc(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Ar(t);return r.br(),new Ec(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:jc.bind(null,t),Ri:Yc.bind(null,t),Ir:Kc.bind(null,t),Tr:zc.bind(null,t)}),t.Mr.push((function(n){return(0,dr.sH)(e,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,qc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(br("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var Xc=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mr(vr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function $c(t,e){if(wr("AsyncQueue",e+": "+t),ps(t))return new mr(vr.UNAVAILABLE,e+": "+t);throw t}var Jc=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Jr.comparator(e.key,n.key)}:function(t,e){return Jr.comparator(t.key,e.key)},this.keyedMap=Ko(),this.sortedSet=new Mo(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Zc=function(){function t(){this.Kr=new Mo(Jr.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Tr():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),tl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Jc.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),el=function(){this.Wr=void 0,this.listeners=[]},nl=function(){this.queries=new cu((function(t){return Wi(t)}),Yi),this.onlineState="Unknown",this.Gr=new Set};function rl(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,dr.YH)(this,(function(c){switch(c.label){case 0:if(n=Ar(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new el),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=$c(s,"Initialization of query '"+Gi(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&sl(n),[2]}}))}))}function il(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,dr.YH)(this,(function(s){return n=Ar(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function ol(t,e){for(var n=Ar(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&sl(n)}function al(t,e,n){var r=Ar(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function sl(t){t.Gr.forEach((function(t){t.next()}))}var ul=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new tl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=tl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),cl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ll=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ma(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ia(this.R,t.document,!1):pi.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return fa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=hl(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new ll(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Go()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e,n,r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return[4,Uu(this.localStore,new ll(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Bu(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Tu(Object.assign({},this.progress),t))]}}))}))}}();function hl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var fl=function(t){this.key=t},dl=function(t){this.key=t},pl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Go(),this.mutatedKeys=Go(),this.lo=Xi(t),this.fo=new Jc(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Zc,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Vi(this.query)&&i.size===this.query.limit?i.last():null,c=Hi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Qi(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Vi(this.query)||Hi(this.query))for(;a.size>this.query.limit;){var l=Vi(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new tl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Zc,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Go(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new dl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new fl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Go();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return tl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),vl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ml=function(t){this.key=t,this.bo=!1},yl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new cu((function(t){return Wi(t)}),Yi),this.Vo=new Map,this.So=new Set,this.Do=new Mo(Jr.comparator),this.Co=new Map,this.No=new Ku,this.xo={},this.Fo=new Map,this.ko=$s.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function gl(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,dr.YH)(this,(function(u){switch(u.label){case 0:return n=Wl(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Lu(n.localStore,Ki(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,bl(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Cc(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function bl(t,e,n,r){return(0,dr.sH)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,dr.YH)(this,(function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return(0,dr.sH)(this,void 0,void 0,(function(){var i,o,a;return(0,dr.YH)(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Fu(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Rl(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Fu(t.localStore,e,!0)];case 1:return i=l.sent(),o=new pl(e,i.Bn),a=o._o(i.documents),s=Jo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Rl(t,n,u.To),c=new vl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function wl(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return n=Ar(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Yi(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Mu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Nc(n.remoteStore,r.targetId),Dl(n,r.targetId)})).catch(nu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Dl(n,r.targetId),[4,Mu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function El(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i,o,a;return(0,dr.YH)(this,(function(s){switch(s.label){case 0:r=Gl(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ar(t),i=kr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Go());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Eo(c,n.get(c.key));null!=l&&a.push(new Ao(c.key,l,di(l.toProto().mapValue),mo.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Mo(Nr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ll(r,i.changes)];case 3:return s.sent(),[4,qc(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=$c(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Il(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:n=Ar(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ru(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(_r(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?_r(r.bo):t.removedDocuments.size>0&&(_r(r.bo),r.bo=!1))})),[4,Ll(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,nu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Tl(t,e,n){var r=Ar(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ar(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&sl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _l(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,dr.YH)(this,(function(c){switch(c.label){case 0:return(r=Ar(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Mo(Jr.comparator)).insert(o,pi.newNoDocument(o,Rr.min())),s=Go().add(o),u=new $o(Rr.min(),new Map,new Ho(Nr),a,s),[4,Il(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Pl(r),[3,4];case 2:return[4,Mu(r.localStore,e,!1).then((function(){return Dl(r,e,n)})).catch(nu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Al(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:n=Ar(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Du(n.localStore,e)];case 2:return i=o.sent(),xl(n,r,null),Nl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ll(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,nu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Sl(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:r=Ar(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ar(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return _r(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),xl(r,e,n),Nl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ll(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,nu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Cl(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,dr.YH)(this,(function(s){switch(s.label){case 0:Oc((n=Ar(t)).remoteStore)||br("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Ar(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=$c(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Nl(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function xl(t,e,n){var r=Ar(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Dl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||kl(t,e)}))}function kl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Nc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Pl(t))}function Rl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof fl?(t.No.addReference(o.key,e),Ol(t,o)):o instanceof dl?(br("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||kl(t,o.key)):Tr()}}function Ol(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(br("SyncEngine","New document in limbo: "+n),t.So.add(r),Pl(t))}function Pl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Jr(Fr.fromString(e)),r=t.ko.next();t.Co.set(r,new ml(n)),t.Do=t.Do.insert(n,r),Cc(t.remoteStore,new Ts(Ki(Fi(n.path)),r,2,pr.o))}}function Ll(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i,o,a;return(0,dr.YH)(this,(function(s){switch(s.label){case 0:return r=Ar(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.$o(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Au.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return(0,dr.YH)(this,(function(h){switch(h.label){case 0:n=Ar(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return cs.forEach(e,(function(e){return cs.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return cs.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!ps(r=h.sent()))throw r;return br("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Ml(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return(n=Ar(t)).currentUser.isEqual(e)?[3,3]:(br("SyncEngine","User change. New user:",e.toKey()),[4,xu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new mr(vr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ll(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Fl(t,e){var n=Ar(t),r=n.Co.get(e);if(r&&r.bo)return Go().add(r.key);var i=Go(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Vl(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return[4,Fu((n=Ar(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Rl(n,e.targetId,i.To),i)]}}))}))}function Hl(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){return[2,Hu((e=Ar(t)).localStore).then((function(t){return Ll(e,t)}))]}))}))}function ql(t,e,n,r){return(0,dr.sH)(this,void 0,void 0,(function(){var i,o;return(0,dr.YH)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Ar(t),r=Ar(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):cs.resolve(null)}))}))}((i=Ar(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,qc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(xl(i,e,r||null),Nl(i,e),function(t,e){Ar(Ar(t)._n).Gt(e)}(i.localStore,e)):Tr(),a.label=4;case 4:return[4,Ll(i,o)];case 5:return a.sent(),[3,7];case 6:br("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Ul(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return(0,dr.YH)(this,(function(l){switch(l.label){case 0:return Wl(n=Ar(t)),Gl(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Bl(n,r.toArray())]);case 1:return i=l.sent(),n.Oo=!0,[4,Wc(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],Cc(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Dl(n,e),Mu(n.localStore,e,!0)})),Nc(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,Bl(n,u)];case 5:return l.sent(),function(t){var e=Ar(t);e.Co.forEach((function(t,n){Nc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Mo(Jr.comparator)}(n),n.Oo=!1,[4,Wc(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function Bl(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,v;return(0,dr.YH)(this,(function(m){switch(m.label){case 0:n=Ar(t),r=[],i=[],o=0,a=e,m.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Lu(n.localStore,Ki(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(f=h[l],d=n.Po.get(f),[4,Vl(n,d)]):[3,6];case 4:(p=m.sent()).snapshot&&i.push(p.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Vu(n.localStore,s)];case 8:return v=m.sent(),[4,Lu(n.localStore,v)];case 9:return u=m.sent(),[4,bl(n,jl(v),s,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function jl(t){return Mi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Kl(t){var e=Ar(t);return Ar(Ar(e.localStore).persistence).fn()}function zl(t,e,n,r){return(0,dr.sH)(this,void 0,void 0,(function(){var i,o,a;return(0,dr.YH)(this,(function(s){switch(s.label){case 0:return(i=Ar(t)).Oo?(br("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Hu(i.localStore)];case 3:return o=s.sent(),a=$o.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ll(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Mu(i.localStore,e,!0)];case 6:return s.sent(),Dl(i,e,r),[3,8];case 7:Tr(),s.label=8;case 8:return[2]}}))}))}function Yl(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return(0,dr.YH)(this,(function(d){switch(d.label){case 0:if(!(r=Wl(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(br("SyncEngine","Adding an already active target "+a),[3,5]):[4,Vu(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,Lu(r.localStore,s)];case 3:return u=d.sent(),[4,bl(r,jl(s),u.targetId,!1)];case 4:d.sent(),Cc(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Mu(r.localStore,t,!1).then((function(){Nc(r.remoteStore,t),Dl(r,t)})).catch(nu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Wl(t){var e=Ar(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Il.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_l.bind(null,e),e.vo._r=ol.bind(null,e.eventManager),e.vo.Mo=al.bind(null,e.eventManager),e}function Gl(t){var e=Ar(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Al.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sl.bind(null,e),e}var Ql=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return this.R=yc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Nu(this.persistence,new Su,t.initialUser,this.R)},t.prototype.qo=function(t){return new Xu(Ju.bs,this.R)},t.prototype.Bo=function(t){return new cc},t.prototype.terminate=function(){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,dr.C6)(e,t),e.prototype.initialize=function(e){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,qu(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Gl(this.Ko.syncEngine)];case 4:return n.sent(),[4,qc(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Nu(this.persistence,new Su,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new ou(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Iu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new bu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,vc(),mc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new cc},e}(Ql),$l=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,dr.C6)(e,t),e.prototype.initialize=function(e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r=this;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof uc?(this.sharedClientState.syncEngine={ui:ql.bind(null,n),ai:zl.bind(null,n),hi:Yl.bind(null,n),fn:Kl.bind(null,n),ci:Hl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return(0,dr.sH)(r,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return[4,Ul(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=vc();if(!uc.yt(e))throw new mr(vr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Iu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new uc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Xl),Jl=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n=this;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Tl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ml.bind(null,this.syncEngine),[4,Wc(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new nl},t.prototype.createDatastore=function(t){var e,n=yc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new pc(e));return function(t,e,n){return new Ic(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Tl(a.syncEngine,t,0)},o=hc.yt()?new hc:new lc,new _c(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new yl(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return e=Ar(t),br("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Sc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var Zl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),th=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new us,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e,n,r;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new cl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e,n=this;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new mr(vr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,dr.YH)(this,(function(u){switch(u.label){case 0:return n=Ar(t),r=ba(n.R)+"/documents",i={documents:e.map((function(t){return va(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){_r(!!e.found),e.found.name,e.found.updateTime;var n=ma(t,e.found.name),r=fa(e.found.updateTime),i=new fi({mapValue:{fields:e.found.fields}});return pi.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){_r(!!e.missing),_r(!!e.readTime);var n=ma(t,e.missing),r=fa(e.readTime);return pi.newNoDocument(n,r)}(t,e):Tr()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());_r(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ko(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e=this;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Jr.fromPath(n);e.mutations.push(new Ro(r,e.precondition(r)))})),[4,function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return n=Ar(t),r=ba(n.R)+"/documents",i={writes:e.map((function(t){return Ta(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Tr();e=Rr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new mr(vr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?mo.updateTime(e):mo.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Rr.min()))throw new mr(vr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mo.updateTime(e)}return mo.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),eh=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new gc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,dr.sH)(t,void 0,void 0,(function(){var t,e,n=this;return(0,dr.YH)(this,(function(r){return t=new th(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Qr(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Po(e)}return!1},t}(),nh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Zu.UNAUTHENTICATED,this.clientId=Cr.u(),this.credentialListener=function(){},this.receivedInitialUser=new us,this.credentials.setChangeListener((function(t){br("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new mr(vr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,dr.sH)(t,void 0,void 0,(function(){var t,n;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=$c(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function rh(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r,i=this;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),br("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return(0,dr.sH)(i,void 0,void 0,(function(){return(0,dr.YH)(this,(function(t){switch(t.label){case 0:return[4,xu(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function ih(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,oh(t)];case 1:return n=i.sent(),br("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return(0,dr.sH)(this,void 0,void 0,(function(){var n,r;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return(n=Ar(t)).asyncQueue.verifyOperationInProgress(),br("RemoteStore","RemoteStore received new credentials"),r=Oc(n),n.$r.add(3),[4,Sc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Ac(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function oh(t){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(br("FirestoreClient","Using default OfflineComponentProvider"),[4,rh(t,new Ql)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function ah(t){return(0,dr.sH)(this,void 0,void 0,(function(){return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(br("FirestoreClient","Using default OnlineComponentProvider"),[4,ih(t,new Jl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function sh(t){return oh(t).then((function(t){return t.persistence}))}function uh(t){return oh(t).then((function(t){return t.localStore}))}function ch(t){return ah(t).then((function(t){return t.remoteStore}))}function lh(t){return ah(t).then((function(t){return t.syncEngine}))}function hh(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e,n;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return[4,ah(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=gl.bind(null,e.syncEngine),n.onUnlisten=wl.bind(null,e.syncEngine),n)]}}))}))}function fh(t,e,n){var r=this;void 0===n&&(n={});var i=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(r,void 0,void 0,(function(){var r;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Zl({next:function(o){e.enqueueAndForget((function(){return il(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new mr(vr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new mr(vr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new ul(Fi(n.path),o,{includeMetadataChanges:!0,so:!0});return rl(t,a)},[4,hh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function dh(t,e,n){var r=this;void 0===n&&(n={});var i=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(r,void 0,void 0,(function(){var r;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Zl({next:function(n){e.enqueueAndForget((function(){return il(t,a)})),n.fromCache&&"server"===r.source?i.reject(new mr(vr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new ul(n,o,{includeMetadataChanges:!0,so:!0});return rl(t,a)},[4,hh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var ph=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},vh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),mh=new Map,yh=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},gh=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Zu.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),bh=function(){function t(t){var e=this;this.oc=null,this.currentUser=Zu.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(br("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(_r("string"==typeof n.accessToken),new yh(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return _r(null===t||"string"==typeof t),new Zu(t)},t}(),wh=function(){function t(t,e){this.ac=t,this.hc=e,this.type="FirstParty",this.user=Zu.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Eh=function(){function t(t,e){this.ac=t,this.hc=e}return t.prototype.getToken=function(){return Promise.resolve(new wh(this.ac,this.hc))},t.prototype.setChangeListener=function(t){t(Zu.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ih(t,e,n){if(!n)throw new mr(vr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Th(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mr(vr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function _h(t,e,n,r){if(!0===e&&!0===r)throw new mr(vr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ah(t){if(!Jr.isDocumentKey(t))throw new mr(vr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Sh(t){if(Jr.isDocumentKey(t))throw new mr(vr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ch(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Tr()}function Nh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new mr(vr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ch(t);throw new mr(vr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function xh(t,e){if(e<=0)throw new mr(vr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Dh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new mr(vr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mr(vr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,_h("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),kh=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Dh({}),this._settingsFrozen=!1,t instanceof vh?(this._databaseId=t,this._credentials=new gh):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new mr(vr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vh(t.options.projectId)}(t),this._credentials=new bh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new mr(vr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new mr(vr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new gh;switch(t.type){case"gapi":var e=t.client;return _r(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Eh(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new mr(vr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=mh.get(this))&&(br("ComponentProvider","Removing Datastore"),mh.delete(this),t.terminate()),Promise.resolve();var t},t}(),Rh=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ph(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Oh=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ph=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Fi(r))||this).firestore=e,i._path=r,i.type="collection",i}return(0,dr.C6)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Rh(this.firestore,null,new Jr(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Oh);function Lh(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=(0,i.Ku)(t),Ih("collection","path",e),t instanceof kh)return Sh(n=Fr.fromString.apply(Fr,(0,dr.fX)([e],r))),new Ph(t,null,n);if(!(t instanceof Rh||t instanceof Ph))throw new mr(vr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sh(n=Fr.fromString.apply(Fr,(0,dr.fX)([t.path],r)).child(Fr.fromString(e))),new Ph(t.firestore,null,n)}function Mh(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=(0,i.Ku)(t),1===arguments.length&&(e=Cr.u()),Ih("doc","path",e),t instanceof kh)return Ah(n=Fr.fromString.apply(Fr,(0,dr.fX)([e],r))),new Rh(t,null,new Jr(n));if(!(t instanceof Rh||t instanceof Ph))throw new mr(vr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ah(n=t._path.child(Fr.fromString.apply(Fr,(0,dr.fX)([e],r)))),new Rh(t.firestore,t instanceof Ph?t._converter:null,new Jr(n))}function Fh(t,e){return t=(0,i.Ku)(t),e=(0,i.Ku)(e),(t instanceof Rh||t instanceof Ph)&&(e instanceof Rh||e instanceof Ph)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Vh(t,e){return t=(0,i.Ku)(t),e=(0,i.Ku)(e),t instanceof Oh&&e instanceof Oh&&t.firestore===e.firestore&&Yi(t._query,e._query)&&t._converter===e._converter}var Hh=function(){function t(){var t=this;this.lc=Promise.resolve(),this.fc=[],this.dc=!1,this.wc=[],this._c=null,this.mc=!1,this.yc=[],this.Zi=new gc(this,"async_queue_retry"),this.gc=function(){var e=mc();e&&br("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=mc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.dc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ec(),this.Tc(t)},t.prototype.enterRestrictedMode=function(){if(!this.dc){this.dc=!0;var t=mc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gc)}},t.prototype.enqueue=function(t){return this.Ec(),this.dc?new Promise((function(t){})):this.Tc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.fc.push(t),e.Ic()}))},t.prototype.Ic=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t,e=this;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:if(0===this.fc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fc[0]()];case 2:return n.sent(),this.fc.shift(),this.Zi.reset(),[3,4];case 3:if(!ps(t=n.sent()))throw t;return br("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.fc.length>0&&this.Zi.ji((function(){return e.Ic()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Tc=function(t){var e=this,n=this.lc.then((function(){return e.mc=!0,t().catch((function(t){throw e._c=t,e.mc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.mc=!1,t}))}));return this.lc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ec(),this.yc.indexOf(t)>-1&&(e=0);var i=Xc.createAndSchedule(this,t,e,n,(function(t){return r.Ac(t)}));return this.wc.push(i),i},t.prototype.Ec=function(){this._c&&Tr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Rc=function(){return(0,dr.sH)(this,void 0,void 0,(function(){var t;return(0,dr.YH)(this,(function(e){switch(e.label){case 0:return[4,t=this.lc];case 1:e.sent(),e.label=2;case 2:if(t!==this.lc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.bc=function(t){for(var e=0,n=this.wc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.vc=function(t){var e=this;return this.Rc().then((function(){e.wc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.wc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Rc()}))},t.prototype.Pc=function(t){this.yc.push(t)},t.prototype.Ac=function(t){var e=this.wc.indexOf(t);this.wc.splice(e,1)},t}();function qh(t){return function(t){if("object"!=typeof t||null===t)return!1;for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new us,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Uh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Hh,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,dr.C6)(e,t),e.prototype._terminate=function(){return this._firestoreClient||jh(this),this._firestoreClient.terminate()},e}(kh);function Bh(t){return t._firestoreClient||jh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jh(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ph(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new nh(t._credentials,t._queue,r)}function Kh(t,e,n){var r=this,i=new us;return t.asyncQueue.enqueue((function(){return(0,dr.sH)(r,void 0,void 0,(function(){var r;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,rh(t,n)];case 1:return o.sent(),[4,ih(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===vr.FAILED_PRECONDITION||t.code===vr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function zh(t){if(t._initialized||t._terminated)throw new mr(vr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Yh=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new mr(vr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Wh=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Ur.fromBase64String(e))}catch(e){throw new mr(vr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ur.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Gh=function(t){this._methodName=t},Qh=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new mr(vr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mr(vr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Nr(this._lat,t._lat)||Nr(this._long,t._long)},t}(),Xh=/^__.*__$/,$h=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ao(t,this.data,this.fieldMask,e,this.fieldTransforms):new _o(t,this.data,e,this.fieldTransforms)},t}(),Jh=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ao(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Zh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tr()}}var tf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Vc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Sc",{get:function(){return this.settings.Sc},enumerable:!1,configurable:!0}),t.prototype.Dc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Cc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.xc(t),r},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.Vc(),r},t.prototype.kc=function(t){return this.Dc({path:void 0,Nc:!0})},t.prototype.Oc=function(t){return Ef(t,this.settings.methodName,this.settings.$c||!1,this.path,this.settings.Mc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Vc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.xc(this.path.get(t))},t.prototype.xc=function(t){if(0===t.length)throw this.Oc("Document fields must not be empty");if(Zh(this.Sc)&&Xh.test(t))throw this.Oc('Document fields cannot begin and end with "__"')},t}(),ef=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||yc(t)}return t.prototype.Lc=function(t,e,n,r){return void 0===r&&(r=!1),new tf({Sc:t,methodName:e,Mc:n,path:Hr.emptyPath(),Nc:!1,$c:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function nf(t){var e=t._freezeSettings(),n=yc(t._databaseId);return new ef(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Lc(o.merge||o.mergeFields?2:0,e,n,i);yf("Data must be an object, but it was:",a,r);var s,u,c=vf(r,a);if(o.merge)s=new qr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=gf(e,f[h],n);if(!a.contains(d))throw new mr(vr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");If(l,d)||l.push(d)}s=new qr(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new $h(new fi(c),s,u)}var of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Sc)throw 1===t.Sc?t.Oc(this._methodName+"() can only appear at the top level of your update data"):t.Oc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Gh);function af(t,e,n){return new tf({Sc:3,Mc:e.settings.Mc,methodName:t._methodName,Nc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e.prototype._toFieldTransform=function(t){return new po(t.path,new oo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Gh),uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return(0,dr.C6)(e,t),e.prototype._toFieldTransform=function(t){var e=af(this,t,!0),n=this.Bc.map((function(t){return pf(t,e)})),r=new ao(n);return new po(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Gh),cf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return(0,dr.C6)(e,t),e.prototype._toFieldTransform=function(t){var e=af(this,t,!0),n=this.Bc.map((function(t){return pf(t,e)})),r=new uo(n);return new po(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Gh),lf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,dr.C6)(e,t),e.prototype._toFieldTransform=function(t){var e=new lo(t.R,to(t.R,this.qc));return new po(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Gh);function hf(t,e,n,r){var o=t.Lc(1,e,n);yf("Data must be an object, but it was:",o,r);var a=[],s=fi.empty();Pr(r,(function(t,r){var u=wf(e,t,n);r=(0,i.Ku)(r);var c=o.Fc(u);if(r instanceof of)a.push(u);else{var l=pf(r,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new qr(a);return new Jh(s,u,o.fieldTransforms)}function ff(t,e,n,r,o,a){var s=t.Lc(1,e,n),u=[gf(e,r,n)],c=[o];if(a.length%2!=0)throw new mr(vr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<a.length;l+=2)u.push(gf(e,a[l])),c.push(a[l+1]);for(var h=[],f=fi.empty(),d=u.length-1;d>=0;--d)if(!If(h,u[d])){var p=u[d],v=c[d];v=(0,i.Ku)(v);var m=s.Fc(p);if(v instanceof of)h.push(p);else{var y=pf(v,m);null!=y&&(h.push(p),f.set(p,y))}}var g=new qr(h);return new Jh(f,g,s.fieldTransforms)}function df(t,e,n,r){return void 0===r&&(r=!1),pf(n,t.Lc(r?4:3,e))}function pf(t,e){if(mf(t=(0,i.Ku)(t)))return yf("Unsupported field value:",e,t),vf(t,e);if(t instanceof Gh)return function(t,e){if(!Zh(e.Sc))throw e.Oc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Oc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nc&&4!==e.Sc)throw e.Oc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=pf(o[i],e.kc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,i.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return to(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=kr.fromDate(t);return{timestampValue:ca(e.R,n)}}if(t instanceof kr)return n=new kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ca(e.R,n)};if(t instanceof Qh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wh)return{bytesValue:la(e.R,t._byteString)};if(t instanceof Rh){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Oc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:da(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Oc("Unsupported field value: "+Ch(t))}(t,e)}function vf(t,e){var n={};return Lr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pr(t,(function(t,r){var i=pf(r,e.Cc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function mf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kr||t instanceof Qh||t instanceof Wh||t instanceof Rh||t instanceof Gh)}function yf(t,e,n){if(!mf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ch(n);throw"an object"===r?e.Oc(t+" a custom object"):e.Oc(t+" "+r)}}function gf(t,e,n){if((e=(0,i.Ku)(e))instanceof Yh)return e._internalPath;if("string"==typeof e)return wf(t,e);throw Ef("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var bf=new RegExp("[~\\*/\\[\\]]");function wf(t,e,n){if(e.search(bf)>=0)throw Ef("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Yh.bind.apply(Yh,(0,dr.fX)([void 0],e.split(".")))))._internalPath}catch(I){throw Ef("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ef(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new mr(vr.INVALID_ARGUMENT,(s+=". ")+t+u)}function If(t,e){return t.some((function(t){return t.isEqual(e)}))}var Tf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Rh(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new _f(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Af("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),_f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Tf);function Af(t,e){return"string"==typeof e?wf(t,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}var Sf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Cf=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,dr.C6)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Af("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Tf),Nf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Cf),xf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Sf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Nf(n._firestore,n._userDataWriter,r.key,r,new Sf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mr(vr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Nf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Sf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Nf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Sf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Df(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Df(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tr()}}function kf(t,e){return t instanceof Cf&&e instanceof Cf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof xf&&e instanceof xf&&t._firestore===e._firestore&&Vh(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Rf(t){if(Hi(t)&&0===t.explicitOrderBy.length)throw new mr(vr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Of=function(){};function Pf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r]._apply(t)}return t}var Lf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Uc=e,i.Qc=n,i.Kc=r,i.type="where",i}return(0,dr.C6)(e,t),e.prototype._apply=function(t){var e=nf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new mr(vr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Bf(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(Uf(r,t,h))}s={arrayValue:{values:u}}}else s=Uf(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Bf(a,o),s=df(n,"where",a,"in"===o||"not-in"===o);var f=wi.create(i,o,s);return function(t,e){if(e.g()){var n=Ui(t);if(null!==n&&!n.isEqual(e.field))throw new mr(vr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=qi(t);null!==r&&jf(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new mr(vr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new mr(vr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Uc,this.Qc,this.Kc);return new Oh(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Of),Mf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Uc=e,r.jc=n,r.type="orderBy",r}return(0,dr.C6)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new mr(vr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new mr(vr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ki(e,n);return function(t,e){if(null===qi(t)){var n=Ui(t);null!==n&&jf(t,n,e.field)}}(t,r),r}(t._query,this.Uc,this.jc);return new Oh(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Li(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Of),Ff=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Wc=n,i.Gc=r,i}return(0,dr.C6)(e,t),e.prototype._apply=function(t){return new Oh(t.firestore,t._converter,zi(t._query,this.Wc,this.Gc))},e}(Of),Vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,dr.C6)(e,t),e.prototype._apply=function(t){var e=qf(t,this.type,this.zc,this.Hc);return new Oh(t.firestore,t._converter,function(t,e){return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Of),Hf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,dr.C6)(e,t),e.prototype._apply=function(t){var e=qf(t,this.type,this.zc,this.Hc);return new Oh(t.firestore,t._converter,function(t,e){return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Of);function qf(t,e,n,r){if(n[0]=(0,i.Ku)(n[0]),n[0]instanceof Tf)return function(t,e,n,r,i){if(!r)throw new mr(vr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=ji(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(ai(e,r.key));else{var c=r.data.field(u.field);if(Yr(c))throw new mr(vr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new mr(vr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new xi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var o=nf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new mr(vr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new mr(vr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Bi(t)&&-1!==c.indexOf("/"))throw new mr(vr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Fr.fromString(c));if(!Jr.isDocumentKey(l))throw new mr(vr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Jr(l);s.push(ai(e,h))}else{var f=df(n,r,c);s.push(f)}}return new xi(s,o)}(t._query,t.firestore._databaseId,o,e,n,r)}function Uf(t,e,n){if("string"==typeof(n=(0,i.Ku)(n))){if(""===n)throw new mr(vr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bi(e)&&-1!==n.indexOf("/"))throw new mr(vr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Fr.fromString(n));if(!Jr.isDocumentKey(r))throw new mr(vr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ai(t,new Jr(r))}if(n instanceof Rh)return ai(t,n._key);throw new mr(vr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ch(n)+".")}function Bf(t,e){if(!Array.isArray(t)||0===t.length)throw new mr(vr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new mr(vr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function jf(t,e,n){if(!n.isEqual(e))throw new mr(vr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Kf=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Zr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Kr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Tr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Pr(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Qh(Kr(t.latitude),Kr(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Wr(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Gr(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=jr(t);return new kr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Fr.fromString(t);_r(Va(n));var r=new vh(n.get(1),n.get(3)),i=new Jr(n.popFirst(5));return r.isEqual(e)||wr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function zf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Yf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,dr.C6)(e,t),e.prototype.convertBytes=function(t){return new Wh(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rh(this.firestore,null,e)},e}(Kf),Wf=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=nf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Gf(t,this._firestore),i=zf(r._converter,e,n),o=rf(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,mo.none())),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var a,s=Gf(t,this._firestore);return a="string"==typeof(e=(0,i.Ku)(e))||e instanceof Yh?ff(this._dataReader,"WriteBatch.update",s._key,e,n,r):hf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,mo.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Gf(t,this._firestore);return this._mutations=this._mutations.concat(new ko(e._key,mo.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new mr(vr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Gf(t,e){if((t=(0,i.Ku)(t)).firestore!==e)throw new mr(vr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Qf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,dr.C6)(e,t),e.prototype.convertBytes=function(t){return new Wh(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rh(this.firestore,null,e)},e}(Kf);function Xf(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];t=Nh(t,Rh);var a=Nh(t.firestore,Uh),s=nf(a);return Jf(a,[("string"==typeof(e=(0,i.Ku)(e))||e instanceof Yh?ff(s,"updateDoc",t._key,e,n,r):hf(s,"updateDoc",t._key,e)).toMutation(t._key,mo.exists(!0))])}function $f(t){for(var e,n,r,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];t=(0,i.Ku)(t);var s={includeMetadataChanges:!1},u=0;"object"!=typeof o[u]||qh(o[u])||(s=o[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(qh(o[u])){var d=o[u];o[u]=null===(e=d.next)||void 0===e?void 0:e.bind(d),o[u+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),o[u+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Rh)l=Nh(t.firestore,Uh),h=Fi(t._key.path),c={next:function(e){o[u]&&o[u](Zf(l,t,e))},error:o[u+1],complete:o[u+2]};else{var p=Nh(t,Oh);l=Nh(p.firestore,Uh),h=p._query;var v=new Qf(l);c={next:function(t){o[u]&&o[u](new xf(l,v,p,t))},error:o[u+1],complete:o[u+2]},Rf(t._query)}return function(t,e,n,r){var i=this,o=new Zl(r),a=new ul(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(i,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return e=rl,[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(i,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return e=il,[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Bh(l),h,f,c)}function Jf(t,e){return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(n,void 0,void 0,(function(){var n;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return n=El,[4,lh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Bh(t),e)}function Zf(t,e,n){var r=n.docs.get(e._key),i=new Qf(t);return new Cf(t,i,e._key,r,new Sf(n.hasPendingWrites,n.fromCache),e._converter)}var td=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,dr.C6)(e,t),e.prototype.get=function(e){var n=this,r=Gf(e,this._firestore),i=new Qf(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Cf(n._firestore,i,r._key,t._document,new Sf(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=nf(t)}return t.prototype.get=function(t){var e=this,n=Gf(t,this._firestore),r=new Yf(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Tr();var i=t[0];if(i.isFoundDocument())return new Tf(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Tf(e._firestore,r,n._key,null,n._converter);throw Tr()}))},t.prototype.set=function(t,e,n){var r=Gf(t,this._firestore),i=zf(r._converter,e,n),o=rf(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a,s=Gf(t,this._firestore);return a="string"==typeof(e=(0,i.Ku)(e))||e instanceof Yh?ff(this._dataReader,"Transaction.update",s._key,e,n,r):hf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=Gf(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ed(){if("undefined"==typeof Uint8Array)throw new mr(vr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nd(){if("undefined"==typeof atob)throw new mr(vr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return nd(),new t(Wh.fromBase64String(e))},t.fromUint8Array=function(e){return ed(),new t(Wh.fromUint8Array(e))},t.prototype.toBase64=function(){return nd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ed(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),id=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){zh(t=Nh(t,Uh));var n=Bh(t),r=t._freezeSettings(),i=new Jl;return Kh(n,i,new Xl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){zh(t=Nh(t,Uh));var e=Bh(t),n=t._freezeSettings(),r=new Jl;return Kh(e,r,new $l(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new mr(vr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new us;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,dr.sH)(e,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return hs.yt()?(e=t+"main",[4,hs.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Iu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),od=function(){function t(t,e,n){var r=this;this._delegate=e,this.Jc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof vh||(this.Yc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Nh(t,kh))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Er("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,dr.sH)(e,void 0,void 0,(function(){var e,n;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return[4,sh(t)];case 1:return e=r.sent(),[4,ch(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ar(t);return e.$r.delete(0),Ac(e)}(n))]}}))}))}))}(Bh(Nh(this._delegate,Uh)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,dr.sH)(e,void 0,void 0,(function(){var e,n;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return[4,sh(t)];case 1:return e=r.sent(),[4,ch(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,dr.sH)(this,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return(e=Ar(t)).$r.add(0),[4,Sc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Bh(Nh(this._delegate,Uh)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&_h("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Jc.enableMultiTabIndexedDbPersistence(this):this.Jc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Jc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Yc&&(this.Yc._removeServiceInstance("firestore"),this.Yc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(e,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(r){switch(r.label){case 0:return e=Cl,[4,lh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Bh(Nh(this._delegate,Uh)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Zl(e);return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(n,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ar(t).Gr.add(e),e.next()},[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(n,void 0,void 0,(function(){var e;return(0,dr.YH)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ar(t).Gr.delete(e)},[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Bh(t=Nh(t,Uh)),qh(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yc)throw new mr(vr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new bd(this,Lh(this._delegate,t))}catch(t){throw hd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new ld(this,Mh(this._delegate,t))}catch(t){throw hd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new md(this,function(t,e){if(t=Nh(t,kh),Ih("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new mr(vr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Oh(t,null,function(t){return new Li(Fr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw hd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(n,void 0,void 0,(function(){var n;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return[4,function(t){return ah(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new eh(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Bh(t),(function(n){return e(new td(t,n))}))}(this._delegate,(function(n){return t(new sd(e,n))}))},t.prototype.batch=function(){var t=this;return Bh(this._delegate),new ud(new Wf(this._delegate,(function(e){return Jf(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new mr(vr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new mr(vr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),ad=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,dr.C6)(e,t),e.prototype.convertBytes=function(t){return new rd(new Wh(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return ld.Xc(e,this.firestore,null)},e}(Kf);var sd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ad(t)}return t.prototype.get=function(t){var e=this,n=wd(t);return this._delegate.get(n).then((function(t){return new pd(e._firestore,new Cf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=wd(t);return n?(Th("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=wd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,dr.fX)([a,e,n],i)),this},t.prototype.delete=function(t){var e=wd(t);return this._delegate.delete(e),this},t}(),ud=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=wd(t);return n?(Th("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=wd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,dr.fX)([a,e,n],i)),this},t.prototype.delete=function(t){var e=wd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),cd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Nf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new vd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.Zc=function(e,n){var r=t.tu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new ad(e),n),i.set(n,o)),o},t}();cd.tu=new WeakMap;var ld=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ad(t)}return t.eu=function(e,n,r){if(e.length%2!=0)throw new mr(vr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Rh(n._delegate,r,new Jr(e)))},t.Xc=function(e,n,r){return new t(n,new Rh(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new bd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new bd(this.firestore,Lh(this._delegate,t))}catch(t){throw hd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,i.Ku)(t))instanceof Rh&&Fh(this._delegate,t)},t.prototype.set=function(t,e){e=Th("DocumentReference.set",e);try{return function(t,e,n){t=Nh(t,Rh);var r=Nh(t.firestore,Uh),i=zf(t._converter,e,n);return Jf(r,[rf(nf(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,mo.none())])}(this._delegate,t,e)}catch(t){throw hd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Xf(this._delegate,t):Xf.apply(void 0,(0,dr.fX)([this._delegate,t,e],n))}catch(t){throw hd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Jf(Nh((t=this._delegate).firestore,Uh),[new ko(t._key,mo.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=fd(e),i=dd(e,(function(e){return new pd(t.firestore,new Cf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return $f(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Nh(t,Rh);var e=Nh(t.firestore,Uh),n=Bh(e),r=new Qf(e);return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(n,void 0,void 0,(function(){var n;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i;return(0,dr.YH)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ar(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new mr(vr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=$c(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,uh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Cf(e,r,t._key,n,new Sf(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Nh(t,Rh);var e=Nh(t.firestore,Uh);return fh(Bh(e),t._key,{source:"server"}).then((function(n){return Zf(e,t,n)}))}(this._delegate):function(t){t=Nh(t,Rh);var e=Nh(t.firestore,Uh);return fh(Bh(e),t._key).then((function(n){return Zf(e,t,n)}))}(this._delegate)).then((function(t){return new pd(e.firestore,new Cf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(cd.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}();function hd(t,e,n){return t.message=t.message.replace(e,n),t}function fd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!qh(r))return r}return{}}function dd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=qh(t[0])?t[0]:qh(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new ld(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return kf(this._delegate,t._delegate)},t}(),vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.C6)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(pd),md=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ad(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Pf(this._delegate,function(t,e,n){var r=e,i=Af("where",t);return new Lf(i,r,n)}(e,n,r)))}catch(e){throw hd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Pf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Af("orderBy",t);return new Mf(r,n)}(e,n)))}catch(e){throw hd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Pf(this._delegate,function(t){return xh("limit",t),new Ff("limit",t,"F")}(e)))}catch(e){throw hd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Pf(this._delegate,function(t){return xh("limitToLast",t),new Ff("limitToLast",t,"L")}(e)))}catch(e){throw hd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vf("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw hd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vf("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw hd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hf("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw hd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hf("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw hd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Vh(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Nh(t,Oh);var e=Nh(t.firestore,Uh),n=Bh(e),r=new Qf(e);return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.sH)(n,void 0,void 0,(function(){var n;return(0,dr.YH)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,dr.sH)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,dr.YH)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Fu(t,e,!0)];case 1:return s=u.sent(),r=new pl(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=$c(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,uh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new xf(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Nh(t,Oh);var e=Nh(t.firestore,Uh),n=Bh(e),r=new Qf(e);return dh(n,t._query,{source:"server"}).then((function(n){return new xf(e,r,t,n)}))}(this._delegate):function(t){t=Nh(t,Oh);var e=Nh(t.firestore,Uh),n=Bh(e),r=new Qf(e);return Rf(t._query),dh(n,t._query).then((function(n){return new xf(e,r,t,n)}))}(this._delegate)).then((function(t){return new gd(e.firestore,new xf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=fd(e),i=dd(e,(function(e){return new gd(t.firestore,new xf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return $f(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(cd.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}(),yd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new vd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),gd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new md(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new vd(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new yd(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new vd(n._firestore,r))}))},t.prototype.isEqual=function(t){return kf(this._delegate,t._delegate)},t}(),bd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,dr.C6)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new ld(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ld(this.firestore,void 0===t?Mh(this._delegate):Mh(this._delegate,t))}catch(t){throw hd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Nh(t.firestore,Uh),r=Mh(t),i=zf(t._converter,e);return Jf(n,[rf(nf(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,mo.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new ld(e.firestore,t)}))},e.prototype.isEqual=function(t){return Fh(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(cd.Zc(this.firestore,t)):this._delegate.withConverter(null))},e}(md);function wd(t){return Nh(t,Rh)}var Ed=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Yh.bind.apply(Yh,(0,dr.fX)([void 0],t)))}return t.documentId=function(){return new t(Hr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,i.Ku)(t))instanceof Yh&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Id=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new sf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new of("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cf("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new lf("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var Td,_d=n(7339),Ad={Firestore:od,GeoPoint:Qh,Timestamp:kr,Blob:rd,Transaction:sd,WriteBatch:ud,DocumentReference:ld,DocumentSnapshot:pd,Query:md,QueryDocumentSnapshot:vd,QuerySnapshot:gd,CollectionReference:bd,FieldPath:Ed,FieldValue:Id,setLogLevel:function(t){var e;e=t,yr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t){t.INTERNAL.registerComponent(new _d.uA("firestore",(function(t){return function(t,e){return new od(t,new Uh(t,e),new id)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Ad)))})(Td=r.A),Td.registerVersion("@firebase/firestore","2.2.2")},221:(t,e,n)=>{n.d(e,{LwM:()=>i});var r=n(6688);function i(t){return(0,r.k5)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"}},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M320 320L192 192m0 128l128-128"}}]})(t)}},6326:(t,e,n)=>{n.d(e,{C6:()=>i,Cl:()=>o,Ju:()=>u,YH:()=>s,fX:()=>l,sH:()=>a,zs:()=>c});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"===typeof SuppressedError&&SuppressedError}}]);
//# sourceMappingURL=114.4c08ab38.chunk.js.map